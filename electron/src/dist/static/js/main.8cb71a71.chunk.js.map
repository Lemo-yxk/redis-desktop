{"version":3,"sources":["app/event/Event.ts","app/components/header/Header.tsx","app/components/config/Config.ts","app/components/layer/Layer.ts","app/tools/Tools.ts","app/services/Command.ts","app/components/addServer/AddServer.tsx","app/ws/WebSocket.ts","app/components/keyTree/Tree.ts","app/components/keyTree/KeyTree.tsx","app/transform/Transform.ts","app/components/panel/data/String.tsx","app/components/panel/data/List.tsx","app/components/panel/data/Hash.tsx","app/components/panel/data/Set.tsx","app/components/panel/data/ZSet.tsx","app/components/panel/Panel.tsx","app/components/serverList/ServerList.tsx","app/components/progress/Progress.tsx","app/components/addKey/AddKey.tsx","app/components/connection/Connection.tsx","app/components/setting/Setting.tsx","app/pages/index/Index.tsx","app/pages/login/Login.tsx","app/App.tsx","serviceWorker.ts","index.tsx"],"names":["events","name","e","this","args","Header","state","date","addKey","Event","emit","className","type","ghost","onClick","PlusOutlined","SettingOutlined","danger","AlignLeftOutlined","Component","JSON","parse","localStorage","getItem","cfg","setItem","stringify","removeItem","setServerName","db","parseInt","status","Math","random","toString","slice","config","clear","mask","div","document","createElement","style","display","justifyContent","alignItems","width","height","position","zIndex","top","left","child","appendChild","body","data","s","key","begin","end","res","index","push","response","success","error","isAxiosError","toJSON","console","log","notification","message","destroy","Layer","close","msg","code","v","test","Config","getServerName","getDB","uuid","getUUID","fileName","Axios","url","defaults","baseURL","method","responseType","then","window","URL","createObjectURL","Blob","link","href","setAttribute","click","post","Qs","serverName","fliter","filter","serverNameAndDB","Tools","Notification","Option","TabPane","AddServer","emptyData","visible","host","port","password","master","cluster","connectType","defaultSplit","defaultFilter","connectTimeout","execTimeout","defaultDB","default","statusMap","add","update","setState","onOpen","remove","title","placement","closable","onClose","getContainer","destroyOnClose","defaultActiveKey","tab","value","onChange","spellCheck","addonBefore","placeholder","changeName","target","changeHost","addCluster","map","i","addonAfter","MinusCircleOutlined","removeCluster","changeCluster","changePort","changeMaster","changePassword","changeDefaultFilter","changeDefaultSplit","changeConnectTime","changeExecTimeout","changeDefaultDB","submit","IsNumber","splice","Command","register","getConfig","description","setConfig","ws","isStart","Socket","Global","OnOpen","Emit","AddListener","setStatus","location","hash","OnError","err","OnClose","delStatus","fn","Start","Close","RemoveListener","dataTree","counter","split","read","length","children","search","prefix","parent","findIndex","id","deleteNode","node","countSub","arr","current","isRead","isActive","isToggled","params","temp","arr1","inArr1","inArr","item","isKey","join","count","toggled","active","countAdd","KeyTree","databases","dbSize","selectedNode","shouldRefresh","tree","base","fontSize","whiteSpace","backgroundColor","padding","color","activeLink","DataTree","size","connect","selectDB","disconnect","delete","deleteKey","insertKey","activeKey","WebSocket","listen","keys","done","readDone","updateTree","updateDatabases","info","notRead","checkRead","reset","setSplit","login","setCurrent","delDB","delServerName","delCurrent","x","y","minWidth","maxWidth","bounds","enableResizing","right","disableDragging","listHeight","onSelect","onToggle","animations","refresh","load","setDB","scan","Transform","RString","List","Hash","Set","ZSet","Empty","do","check","select","insert","newKey","seconds","cmd","doPipe","page","curser","k","score","TextArea","String","props","showValue","rename","view","ttl","maskClosable","onOk","renameKey","onCancel","closeRename","okText","cancelText","toUpperCase","openRename","onConfirm","icon","QuestionCircleOutlined","changeView","save","oldKey","list","addRow","addRowValue","len","selectIndex","listIndex","vlist","React","createRef","onScroll","renderItem","Object","assign","background","el","selectItem","prevPage","setPage","go","nextPage","ceil","call","listArray","forceUpdateGrid","closeAddRow","delRow","openAddRow","ref","overscanRowCount","rowCount","rowHeight","rowRenderer","scrollToAlignment","LeftOutlined","RightOutlined","onBlur","showKey","addRowKey","allData","loadAllData","cursor","r","onChangeShowKey","onChangeShowValue","Panel","panes","onEdit","targetKey","action","lastIndex","forEach","pane","component","createString","createList","createHash","createZSet","createSet","find","createComponent","content","shift","element","hideAdd","tabBarStyle","margin","destroyInactiveTabPane","animated","tabBarGutter","ServerList","configs","allConfig","deleteConfig","values","addServer","confirm","export","DownloadOutlined","deleteAllConfig","DeleteOutlined","header","stopPropagation","setDefault","MProgress","progress","setTimeout","strokeColor","showInfo","strokeWidth","percent","AddKey","keyType","getCurrent","createNormal","createSpecial","footer","Group","Button","Connection","connectDefault","getDefaultConfig","Setting","loading","endCheck","endUpdate","progressUpdate","shouldUpdate","startUpdate","restart","startCheck","Index","Login","LoadingOutlined","App","unlisten","start","getStatus","history","createBrowserHistory","change","path","exact","from","to","Boolean","hostname","match","headers","timeout","interceptors","use","maxCount","duration","createUUID","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.8cb71a71.chunk.js","sourcesContent":["class Event {\n\tevents: { [key: string]: (...args: any[]) => void } = {};\n\n\tadd(name: string, e: (...args: any[]) => void): string {\n\t\tthis.events[name] = e;\n\t\treturn name;\n\t}\n\n\tremove(name: string) {\n\t\tdelete this.events[name];\n\t}\n\n\temit(name: string, ...args: any[]) {\n\t\tthis.events[name] && this.events[name](...args);\n\t}\n}\n\nexport default new Event();\n","import React, { Component } from \"react\";\nimport { Button } from \"antd\";\nimport \"./header.scss\";\nimport Event from \"../../event/Event\";\nimport { AlignLeftOutlined, PlusOutlined, SettingOutlined } from \"@ant-design/icons\";\n\nexport default class Header extends Component {\n\tstate = { date: \"\" };\n\n\taddKey = () => {\n\t\tEvent.emit(\"addKey\");\n\t};\n\n\tcomponentDidMount() {}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"header\">\n\t\t\t\t<div className=\"left\">\n\t\t\t\t\t<Button type=\"link\" ghost onClick={this.addKey}>\n\t\t\t\t\t\t<PlusOutlined />\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"right\">\n\t\t\t\t\t<Button type=\"dashed\" ghost onClick={() => Event.emit(\"openSetting\")}>\n\t\t\t\t\t\t<SettingOutlined />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button type=\"dashed\" danger ghost onClick={() => Event.emit(\"openServerList\")}>\n\t\t\t\t\t\t<AlignLeftOutlined />\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import { config } from \"../../interface/config\";\n\nclass Config {\n\tgetCurrent() {\n\t\treturn JSON.parse(localStorage.getItem(\"current\") || \"{}\");\n\t}\n\n\tsetCurrent(cfg: config) {\n\t\tlocalStorage.setItem(\"current\", JSON.stringify(cfg));\n\t}\n\n\tdelCurrent() {\n\t\tlocalStorage.removeItem(\"current\");\n\t}\n\n\tsetServerName(setServerName: string) {\n\t\tlocalStorage.setItem(\"serverName\", setServerName);\n\t}\n\n\tgetServerName() {\n\t\treturn localStorage.getItem(\"serverName\");\n\t}\n\n\tdelServerName() {\n\t\tlocalStorage.removeItem(\"serverName\");\n\t}\n\n\tsetDB(db: number) {\n\t\tlocalStorage.setItem(\"db\", `${db}`);\n\t}\n\n\tgetDB() {\n\t\tlet db = localStorage.getItem(\"db\");\n\t\tif (!db) return null;\n\t\treturn parseInt(db);\n\t}\n\n\tdelDB() {\n\t\tlocalStorage.removeItem(\"db\");\n\t}\n\n\tsetStatus(status: any) {\n\t\tlocalStorage.setItem(\"status\", status);\n\t}\n\n\tgetStatus() {\n\t\treturn localStorage.getItem(\"status\");\n\t}\n\n\tdelStatus() {\n\t\tlocalStorage.removeItem(\"status\");\n\t}\n\n\tcreateUUID() {\n\t\tlocalStorage.setItem(\n\t\t\t\"uuid\",\n\t\t\tMath.random()\n\t\t\t\t.toString(16)\n\t\t\t\t.slice(2)\n\t\t);\n\t}\n\n\tgetUUID() {\n\t\treturn localStorage.getItem(\"uuid\");\n\t}\n\n\tallConfig() {\n\t\treturn JSON.parse(localStorage.getItem(\"config\") || \"{}\");\n\t}\n\n\tgetConfig(name: string): config {\n\t\tlet cfg = JSON.parse(localStorage.getItem(\"config\") || \"{}\");\n\t\treturn cfg[name];\n\t}\n\n\tsetConfig(name: string, config: config) {\n\t\tlet cfg = JSON.parse(localStorage.getItem(\"config\") || \"{}\");\n\t\tcfg[name] = config;\n\t\tlocalStorage.setItem(\"config\", JSON.stringify(cfg));\n\t}\n\n\tdeleteConfig(name: string) {\n\t\tlet cfg = JSON.parse(localStorage.getItem(\"config\") || \"{}\");\n\t\tdelete cfg[name];\n\t\tlocalStorage.setItem(\"config\", JSON.stringify(cfg));\n\t}\n\n\tdeleteAllConfig() {\n\t\tlocalStorage.removeItem(\"config\");\n\t}\n\n\tclear() {\n\t\tlocalStorage.clear();\n\t}\n}\n\nexport default new Config();\n","class Layer {\n\tmask: any;\n\n\tconstructor() {\n\t\tlet div = document.createElement(\"div\");\n\t\tdiv.style.display = \"flex\";\n\t\tdiv.style.justifyContent = \"center\";\n\t\tdiv.style.alignItems = \"center\";\n\t\tdiv.style.width = \"100vw\";\n\t\tdiv.style.height = \"100vh\";\n\t\tdiv.style.position = \"absolute\";\n\t\tdiv.style.zIndex = \"999999\";\n\t\tdiv.style.top = \"0\";\n\t\tdiv.style.left = \"0\";\n\t\tdiv.style.display = \"none\";\n\t\tthis.mask = div;\n\n\t\tlet child = document.createElement(\"div\");\n\t\tchild.className = \"load-mask-child\";\n\n\t\tdiv.appendChild(child);\n\t\tdocument.body.appendChild(div);\n\t}\n\n\tload() {\n\t\tthis.mask.style.display = \"flex\";\n\t}\n\n\tclose() {\n\t\tthis.mask.style.display = \"none\";\n\t}\n}\n\nexport default new Layer();\n","import { notification, message } from \"antd\";\nimport Layer from \"../components/layer/Layer\";\nclass Tools {\n\tQueryString(data: { [key: string]: string }) {\n\t\tlet s = \"\";\n\t\tfor (const key in data) {\n\t\t\ts += `${key}=${data[key]}&`;\n\t\t}\n\t\treturn s.slice(0, -1);\n\t}\n\n\tRange(begin: number, end: number): number[] {\n\t\tlet res = [];\n\t\tfor (let index = begin; index < end; index++) {\n\t\t\tres.push(index);\n\t\t}\n\t\treturn res;\n\t}\n\n\tNotification(response: any, success?: any, error?: any) {\n\t\tif (response.isAxiosError) {\n\t\t\tlet error = response.toJSON();\n\t\t\tconsole.log(error);\n\t\t\tnotification.error({ message: error.message });\n\t\t\tmessage.destroy();\n\t\t\tLayer.close();\n\t\t\tthrow error;\n\t\t}\n\t\tsuccess = success || response.data.msg;\n\t\terror = error || response.data.msg;\n\t\tif (response.data.code === 200) {\n\t\t\tconsole.log(response.data);\n\t\t\tnotification.success({ message: success });\n\t\t\treturn true;\n\t\t} else {\n\t\t\tnotification.error({ message: error });\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tIsNumber(v: any) {\n\t\tvar reg = /^[0-9]+\\.?[0-9]*$/;\n\t\tif (reg.test(v)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n}\n\nexport default new Tools();\n","import { config } from \"../interface/config\";\nimport Axios from \"axios\";\nimport Qs from \"querystring\";\nimport Tools from \"../tools/Tools\";\nimport Config from \"../components/config/Config\";\nimport { notification } from \"antd\";\n\nclass Command {\n\tserverNameAndDB(): any {\n\t\tlet name = Config.getServerName();\n\t\tlet db = Config.getDB();\n\t\tif (name === null) return notification.error({ message: \"请连接服务!\" });\n\t\tif (db === null) return notification.error({ message: \"请选择DB!\" });\n\t\treturn { name, db };\n\t}\n\n\tuuid() {\n\t\tlet uuid = Config.getUUID();\n\t\tif (!uuid) return notification.error({ message: \"uuid is empty!\" });\n\t\treturn { uuid };\n\t}\n\n\tasync export(fileName: string, data: any) {\n\t\treturn Axios({\n\t\t\turl: `${Axios.defaults.baseURL}/redis/export/file?fileName=${fileName}&data=${data}`,\n\t\t\tmethod: \"GET\",\n\t\t\tresponseType: \"blob\" // important\n\t\t}).then(response => {\n\t\t\tconst url = window.URL.createObjectURL(new Blob([response.data]));\n\t\t\tconst link = document.createElement(\"a\");\n\t\t\tlink.href = url;\n\t\t\tlink.setAttribute(\"download\", fileName);\n\t\t\tdocument.body.appendChild(link);\n\t\t\tlink.click();\n\t\t});\n\t}\n\n\tasync register(type: string, cfg: config) {\n\t\treturn await Axios.post(`/redis/register/${type}`, Qs.stringify({ ...this.uuid(), ...cfg }));\n\t}\n\n\tasync disconnect(serverName: string) {\n\t\treturn await Axios.post(`/redis/db/disconnect`, Qs.stringify({ name: serverName, ...this.uuid() }));\n\t}\n\n\tasync selectDB(serverName: string, db: any) {\n\t\treturn await Axios.post(`/redis/db/select`, Qs.stringify({ name: serverName, db, ...this.uuid() }));\n\t}\n\n\tasync scan(fliter: string) {\n\t\tlet response = await Axios.post(\n\t\t\t`/redis/db/scan`,\n\t\t\tQs.stringify({ filter: fliter, ...this.serverNameAndDB(), ...this.uuid() })\n\t\t);\n\t\treturn response.data.msg;\n\t}\n\n\tasync type(key: string) {\n\t\tlet response = await Axios.post(\n\t\t\t`/redis/key/type`,\n\t\t\tQs.stringify({ ...this.serverNameAndDB(), key: key, ...this.uuid() })\n\t\t);\n\t\treturn response.data.msg;\n\t}\n\n\tasync do(key: string, args: any[]) {\n\t\tlet response = await Axios.post(\n\t\t\t`/redis/key/do`,\n\t\t\tQs.stringify({\n\t\t\t\t...this.serverNameAndDB(),\n\t\t\t\t...this.uuid(),\n\t\t\t\tkey: key,\n\t\t\t\targs: JSON.stringify(args)\n\t\t\t})\n\t\t);\n\n\t\tif (response.data.code !== 200) {\n\t\t\treturn Tools.Notification(response);\n\t\t}\n\n\t\treturn response.data.msg;\n\t}\n\n\tasync doPipe(key: string, args: any[][]) {\n\t\tlet response = await Axios.post(\n\t\t\t`/redis/key/do`,\n\t\t\tQs.stringify({\n\t\t\t\t...this.serverNameAndDB(),\n\t\t\t\t...this.uuid(),\n\t\t\t\tkey: key,\n\t\t\t\targs: JSON.stringify(args)\n\t\t\t})\n\t\t);\n\n\t\tif (response.data.code !== 200) {\n\t\t\treturn Tools.Notification(response);\n\t\t}\n\n\t\treturn response.data.msg;\n\t}\n}\n\nexport default new Command();\n","import React, { Component } from \"react\";\nimport { Drawer, Radio, Input, Button, notification, Select, Divider, Tabs } from \"antd\";\nimport Event from \"../../event/Event\";\nimport \"./addServer.scss\";\nimport Config from \"../config/Config\";\nimport Command from \"../../services/Command\";\nimport { MinusCircleOutlined } from \"@ant-design/icons\";\nimport Tools from \"../../tools/Tools\";\nimport { config } from \"../../interface/config\";\nconst { Option } = Select;\nconst { TabPane } = Tabs;\n\nexport default class AddServer extends Component {\n\temptyData = {\n\t\tvisible: false,\n\t\tname: \"\",\n\t\thost: \"\",\n\t\tport: \"\",\n\t\tpassword: \"\",\n\t\tmaster: \"\",\n\t\tcluster: [] as string[],\n\t\tconnectType: \"normal\",\n\t\tdefaultSplit: \"\",\n\t\tdefaultFilter: \"\",\n\t\tconnectTimeout: \"\",\n\t\texecTimeout: \"\",\n\t\tdefaultDB: \"\",\n\t\tdefault: false\n\t};\n\n\tstate = JSON.parse(JSON.stringify(this.emptyData));\n\n\tstatus = \"\";\n\n\tstatusMap: { [key: string]: string } = { add: \"添加\", update: \"修改\" };\n\n\tonClose() {\n\t\tEvent.emit(\"openServerList\");\n\t\tthis.setState(JSON.parse(JSON.stringify(this.emptyData)));\n\t}\n\n\tonOpen(config: config) {\n\t\tthis.status = \"add\";\n\t\tif (config) this.status = \"update\";\n\t\tthis.setState({ visible: true, ...config });\n\t}\n\n\tcomponentDidMount() {\n\t\tEvent.add(\"openAddServer\", (config: config) => this.onOpen(config));\n\t}\n\n\tcomponentWillUnmount() {\n\t\tEvent.remove(\"openAddServer\");\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Drawer\n\t\t\t\ttitle={`${this.statusMap[this.status]}服务器`}\n\t\t\t\tplacement={this.status === \"add\" ? \"left\" : \"right\"}\n\t\t\t\tclosable={false}\n\t\t\t\tonClose={() => this.onClose()}\n\t\t\t\tvisible={this.state.visible}\n\t\t\t\tgetContainer={false}\n\t\t\t\twidth={\"400px\"}\n\t\t\t\tdestroyOnClose\n\t\t\t\tclassName=\"add-server\"\n\t\t\t>\n\t\t\t\t<Tabs defaultActiveKey=\"1\">\n\t\t\t\t\t<TabPane tab=\"基本设置\" key=\"1\">\n\t\t\t\t\t\t<div className=\"normal-form\">\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tvalue={this.state.connectType}\n\t\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\t\t\t\tonChange={value => this.setState({ connectType: value })}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Option value=\"normal\">Normal</Option>\n\t\t\t\t\t\t\t\t<Option value=\"cluster\">Cluster</Option>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\t\taddonBefore=\"Name\"\n\t\t\t\t\t\t\t\tplaceholder=\"127.0.0.1\"\n\t\t\t\t\t\t\t\tvalue={this.state.name}\n\t\t\t\t\t\t\t\tonChange={value => this.changeName(value.target.value)}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t{this.state.connectType === \"normal\" ? (\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\t\t\taddonBefore=\"Host\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"127.0.0.1\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.host}\n\t\t\t\t\t\t\t\t\tonChange={value => this.changeHost(value.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<div className=\"add-input-box\">\n\t\t\t\t\t\t\t\t\t<div className=\"add\">\n\t\t\t\t\t\t\t\t\t\t<Button type=\"dashed\" onClick={() => this.addCluster()}>\n\t\t\t\t\t\t\t\t\t\t\tHOST\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"input\">\n\t\t\t\t\t\t\t\t\t\t{this.state.cluster.map((v: any, i: number) => (\n\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\taddonAfter={\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MinusCircleOutlined onClick={() => this.removeCluster(i)} />\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"package-input\"\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"127.0.0.1:16379\"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.cluster[i]}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={value => this.changeCluster(i, value.target.value)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{this.state.connectType === \"normal\" ? (\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\t\t\taddonBefore=\"Port\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"6379\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.port}\n\t\t\t\t\t\t\t\t\tonChange={value => this.changePort(value.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\t\t\taddonBefore=\"Master\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"master\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.master}\n\t\t\t\t\t\t\t\t\tonChange={value => this.changeMaster(value.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\t\taddonBefore=\"Pass\"\n\t\t\t\t\t\t\t\tplaceholder=\"password\"\n\t\t\t\t\t\t\t\tvalue={this.state.password}\n\t\t\t\t\t\t\t\tonChange={value => this.changePassword(value.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</TabPane>\n\t\t\t\t\t<TabPane tab=\"高级设置\" key=\"2\">\n\t\t\t\t\t\t<div className=\"normal-form\">\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\t\taddonBefore=\"默认过滤\"\n\t\t\t\t\t\t\t\tplaceholder=\"*\"\n\t\t\t\t\t\t\t\tvalue={this.state.defaultFilter}\n\t\t\t\t\t\t\t\tonChange={value => this.changeDefaultFilter(value.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\t\taddonBefore=\"默认分隔\"\n\t\t\t\t\t\t\t\tplaceholder=\":\"\n\t\t\t\t\t\t\t\tvalue={this.state.defaultSplit}\n\t\t\t\t\t\t\t\tonChange={value => this.changeDefaultSplit(value.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\t\taddonBefore=\"连接超时\"\n\t\t\t\t\t\t\t\tplaceholder=\"3000\"\n\t\t\t\t\t\t\t\tvalue={this.state.connectTimeout}\n\t\t\t\t\t\t\t\tonChange={value => this.changeConnectTime(value.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\t\taddonBefore=\"执行超时\"\n\t\t\t\t\t\t\t\tplaceholder=\"3000\"\n\t\t\t\t\t\t\t\tvalue={this.state.execTimeout}\n\t\t\t\t\t\t\t\tonChange={value => this.changeExecTimeout(value.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\t\taddonBefore=\"默认DB\"\n\t\t\t\t\t\t\t\tplaceholder=\"0\"\n\t\t\t\t\t\t\t\tvalue={this.state.defaultDB}\n\t\t\t\t\t\t\t\tonChange={value => this.changeDefaultDB(value.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</TabPane>\n\t\t\t\t</Tabs>\n\t\t\t\t<div className=\"button-box\">\n\t\t\t\t\t<Button type=\"primary\" onClick={() => this.submit()}>\n\t\t\t\t\t\t{this.statusMap[this.status]}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button type=\"primary\" onClick={() => this.test()}>\n\t\t\t\t\t\t测试\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</Drawer>\n\t\t);\n\t}\n\n\tchangeDefaultDB(value: string): void {\n\t\tthis.setState({ defaultDB: Tools.IsNumber(value) ? value : \"\" });\n\t}\n\tchangeExecTimeout(value: string): void {\n\t\tthis.setState({ execTimeout: Tools.IsNumber(value) ? value : \"\" });\n\t}\n\tchangeConnectTime(value: string): void {\n\t\tthis.setState({ connectTimeout: Tools.IsNumber(value) ? value : \"\" });\n\t}\n\tchangeDefaultSplit(value: string): void {\n\t\tconsole.log(value);\n\t\tthis.setState({ defaultSplit: value });\n\t}\n\tchangeDefaultFilter(value: string): void {\n\t\tthis.setState({ defaultFilter: value });\n\t}\n\tchangePassword(value: string): void {\n\t\tthis.setState({ password: value });\n\t}\n\tchangeMaster(value: string): void {\n\t\tthis.setState({ master: value });\n\t}\n\tchangePort(value: string): void {\n\t\tthis.setState({ port: Tools.IsNumber(value) ? value : \"\" });\n\t}\n\tchangeHost(value: string): void {\n\t\tthis.setState({ host: value });\n\t}\n\tchangeName(value: string): void {\n\t\tthis.setState({ name: value });\n\t}\n\n\tchangeCluster(i: number, value: string) {\n\t\tthis.state.cluster[i] = value;\n\t\tthis.setState({ cluster: this.state.cluster });\n\t}\n\n\tremoveCluster(i: number): void {\n\t\tthis.state.cluster.splice(i, 1);\n\t\tthis.setState({ cluster: this.state.cluster });\n\t}\n\n\taddCluster(): void {\n\t\tthis.state.cluster.push(\"\");\n\t\tthis.setState({ cluster: this.state.cluster });\n\t}\n\n\tasync test() {\n\t\tlet data = {\n\t\t\tname: this.state.name,\n\t\t\thost: this.state.host,\n\t\t\tport: this.state.port,\n\t\t\tpassword: this.state.password,\n\t\t\tmaster: this.state.master,\n\t\t\tcluster: this.state.cluster.filter((v: string) => v !== \"\"),\n\t\t\tconnectType: this.state.connectType,\n\t\t\tdefault: this.state.default,\n\t\t\tdefaultSplit: this.state.defaultSplit || \":\",\n\t\t\tdefaultFilter: this.state.defaultFilter || \"*\",\n\t\t\tconnectTimeout: this.state.connectTimeout || \"3000\",\n\t\t\texecTimeout: this.state.execTimeout || \"3000\",\n\t\t\tdefaultDB: this.state.defaultDB\n\t\t};\n\n\t\tlet response = await Command.register(this.state.connectType, data);\n\n\t\treturn Tools.Notification(response, \"连接成功\");\n\t}\n\n\tasync submit() {\n\t\tvar data = {\n\t\t\tname: this.state.name,\n\t\t\thost: this.state.host,\n\t\t\tport: this.state.port,\n\t\t\tpassword: this.state.password,\n\t\t\tmaster: this.state.master,\n\t\t\tconnectType: this.state.connectType,\n\t\t\tcluster: this.state.cluster.filter((v: string) => v !== \"\"),\n\t\t\tdefault: this.state.default,\n\t\t\tdefaultSplit: this.status === \"add\" ? this.state.defaultSplit || \":\" : this.state.defaultSplit,\n\t\t\tdefaultFilter: this.state.defaultFilter || \"*\",\n\t\t\tconnectTimeout: this.state.connectTimeout || \"3000\",\n\t\t\texecTimeout: this.state.execTimeout || \"3000\",\n\t\t\tdefaultDB: this.status === \"add\" ? this.state.defaultDB || \"0\" : this.state.defaultDB\n\t\t};\n\n\t\tif (this.state.name === \"\") return notification.error({ message: `服务器名不能为空!` });\n\n\t\tlet cfg = Config.getConfig(this.state.name);\n\n\t\tif (this.status === \"add\")\n\t\t\tif (cfg) return notification.error({ message: \"ERROR\", description: `${this.state.name} 已经存在!` });\n\n\t\tConfig.setConfig(this.state.name, data);\n\n\t\tthis.onClose();\n\n\t\tEvent.emit(\"addServer\", this.state.name);\n\n\t\treturn notification.success({ message: \"SUCCESS\", description: `${this.statusMap[this.status]}成功` });\n\t}\n}\n","import Socket from \"lows\";\nimport Config from \"../components/config/Config\";\nimport { message } from \"antd\";\n\nclass WebSocket {\n\tws: Socket;\n\tisStart = false;\n\n\tconstructor() {\n\t\tthis.ws = new Socket({\n\t\t\thost: \"http://127.0.0.1\",\n\t\t\tport: \"12389\"\n\t\t});\n\n\t\tthis.ws.Global = { uuid: Config.getUUID() };\n\n\t\tthis.ws.OnOpen = () => {\n\t\t\tconsole.log(\"on open\");\n\t\t\tthis.ws.Emit(\"/redis/login/login\", {});\n\t\t};\n\n\t\tthis.ws.AddListener(\"/redis/login/login\", (e: any, data: any) => {\n\t\t\tConfig.setStatus(\"ready\");\n\t\t\twindow.location.hash = \"#/index\";\n\t\t});\n\n\t\tthis.ws.OnError = (err: any) => {\n\t\t\tconsole.log(\"on error\", err);\n\t\t};\n\n\t\tthis.ws.OnClose = () => {\n\t\t\tConfig.delStatus();\n\t\t\twindow.location.hash = \"#/login\";\n\t\t\tconsole.log(\"on close\");\n\t\t};\n\t}\n\n\tstart(fn: any) {\n\t\t!this.isStart && this.ws.Start(fn);\n\t\tthis.isStart = true;\n\t}\n\n\tclose() {\n\t\tthis.isStart && this.ws.Close();\n\t\tthis.isStart = false;\n\t}\n\n\tlisten(...args: any[]) {\n\t\tthis.ws.AddListener(...args);\n\t}\n\n\tremove(...args: any[]) {\n\t\tthis.ws.RemoveListener(...args);\n\t}\n}\n\nexport default new WebSocket();\n","class Tree {\n\tdataTree: any[] = [];\n\tcounter = 0;\n\tsplit = \"\";\n\n\tclear() {\n\t\tthis.dataTree = [];\n\t\tthis.counter = 0;\n\t}\n\n\tsetSplit(split: string) {\n\t\tthis.split = split;\n\t}\n\n\tcheckRead(data: any[]) {\n\t\tlet res: any[] = [];\n\t\tlet read = (data: any[]) => {\n\t\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\t\tif (data[i].children) {\n\t\t\t\t\tread(data[i].children);\n\t\t\t\t} else {\n\t\t\t\t\tif (!data[i].read) {\n\t\t\t\t\t\tres.push(data[i]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdata[i].read = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tread(data);\n\t\treturn res;\n\t}\n\n\tsearch(data: any[], key: string): any {\n\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\tif (data[i].children) {\n\t\t\t\tlet res = this.search(data[i].children, key);\n\t\t\t\tif (res) return res;\n\t\t\t} else {\n\t\t\t\tif (data[i].prefix === key) {\n\t\t\t\t\treturn data[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tdeleteNode(data: any) {\n\t\tif (!data.parent) {\n\t\t\tlet index = this.dataTree.findIndex((v: any) => v.id === data.id);\n\t\t\tthis.dataTree.splice(index, 1);\n\t\t\treturn;\n\t\t}\n\t\tlet index = data.parent.children.findIndex((v: any) => v.id === data.id);\n\t\tdata.parent.children.splice(index, 1);\n\t\tif (data.parent.children.length === 0) this.deleteNode(data.parent);\n\t}\n\n\tdeleteKey(key: any) {\n\t\tvar node = this.search(this.dataTree, key);\n\t\tif (node) {\n\t\t\tthis.countSub(node);\n\t\t\tthis.deleteNode(node);\n\t\t}\n\t}\n\n\tinArr(arr: any, i: any) {\n\t\tfor (let index = 0; index < arr.length; index++) {\n\t\t\tif (arr[index][\"i\"] === i && arr[index].children) return arr[index];\n\t\t}\n\t\treturn false;\n\t}\n\n\tinArr1(arr: any, i: any): any {\n\t\tfor (let index = 0; index < arr.length; index++) {\n\t\t\tif (arr[index].i === i && !arr[index].children) return { parent: arr, current: arr[index] };\n\t\t}\n\t\treturn false;\n\t}\n\n\taddKey(key: string, isRead?: boolean, isActive?: boolean, isToggled?: boolean) {\n\t\tlet params = this.split ? key.split(this.split) : [key];\n\t\tlet temp = this.dataTree;\n\t\tvar parent = null;\n\t\tfor (let index = 0; index < params.length; index++) {\n\t\t\tif (params.length === 1) {\n\t\t\t\tvar arr1 = this.inArr1(temp, params[index]);\n\t\t\t\tif (arr1) {\n\t\t\t\t\tarr1.current.read = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (params.length !== 1) {\n\t\t\t\tvar arr = this.inArr(temp, params[index]);\n\t\t\t\tif (arr) {\n\t\t\t\t\tif (index !== params.length - 1) {\n\t\t\t\t\t\tparent = arr;\n\t\t\t\t\t\ttemp = arr.children;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (index === params.length - 1) {\n\t\t\t\t\tfor (let i = 0; i < temp.length; i++) {\n\t\t\t\t\t\tif (temp[i].name === key) {\n\t\t\t\t\t\t\ttemp[i].read = true;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet item: any = {\n\t\t\t\tid: this.counter++,\n\t\t\t\tname: index === params.length - 1 ? key : params[index],\n\t\t\t\tisKey: index === params.length - 1,\n\t\t\t\ti: params[index],\n\t\t\t\tprefix: params.slice(0, index + 1).join(this.split),\n\t\t\t\tchildren: index === params.length - 1 ? null : [],\n\t\t\t\tread: isRead,\n\t\t\t\tcount: 0,\n\t\t\t\tparent: parent,\n\t\t\t\ttoggled: isToggled,\n\t\t\t\tactive: isActive\n\t\t\t};\n\n\t\t\tif (index === params.length - 1) this.countAdd(item);\n\n\t\t\tparent = item;\n\n\t\t\ttemp.push(item);\n\t\t\ttemp = item.children;\n\n\t\t\tif (index === params.length - 1) return item;\n\t\t}\n\t}\n\n\tcountAdd(data: any) {\n\t\tif (data.parent) {\n\t\t\tdata.parent.count++;\n\t\t\tdata.parent.name = `${data.parent[\"i\"]} (${data.parent.count})`;\n\t\t\tthis.countAdd(data.parent);\n\t\t}\n\t}\n\n\tcountSub(data: any) {\n\t\tif (data.parent) {\n\t\t\tdata.parent.count--;\n\t\t\tdata.parent.name = `${data.parent[\"i\"]} (${data.parent.count})`;\n\t\t\tthis.countSub(data.parent);\n\t\t}\n\t}\n}\n\nexport default new Tree();\n","import React, { Component } from \"react\";\nimport { Rnd } from \"react-rnd\";\nimport \"./keyTree.scss\";\nimport { Select, Button, message } from \"antd\";\nimport Tools from \"../../tools/Tools\";\nimport Event from \"../../event/Event\";\nimport Config from \"../config/Config\";\nimport WebSocket from \"../../ws/WebSocket\";\nimport { Treebeard } from \"react-treebeard-ts\";\nimport Command from \"../../services/Command\";\nimport Layer from \"../layer/Layer\";\nimport DataTree from \"./Tree\";\nimport { config } from \"../../interface/config\";\n\nconst Option = Select.Option;\n\nexport default class KeyTree extends Component {\n\tstate = {\n\t\tdatabases: [] as any[],\n\t\tdataTree: [] as any[],\n\t\tdb: \"请选择DB\" as any\n\t};\n\n\tserverName = \"\";\n\tconnectType = \"\";\n\tdbSize = 0;\n\tselectedNode: any = null;\n\tshouldRefresh = false;\n\tconfig: config = {} as config;\n\n\tupdateTree() {\n\t\tthis.setState({ dataTree: DataTree.dataTree });\n\t}\n\n\tupdateDatabases() {\n\t\tlet { databases } = this.state;\n\t\tfor (let i = 0; i < databases.length; i++) {\n\t\t\tif (databases[i].key === this.state.db) {\n\t\t\t\tdatabases[i].size = this.dbSize;\n\t\t\t}\n\t\t}\n\t\tthis.setState({ databases: databases });\n\t}\n\n\tasync componentDidMount() {\n\t\tEvent.add(\"connect\", (serverName, connectType, fn) => this.connect(serverName, connectType, fn));\n\t\tEvent.add(\"selectDB\", (db, fn) => this.selectDB(db, fn));\n\t\tEvent.add(\"disconnect\", serverName => this.disconnect(serverName));\n\t\tEvent.add(\"update\", serverName => this.update(serverName));\n\t\tEvent.add(\"delete\", serverName => this.delete(serverName));\n\t\tEvent.add(\"deleteKey\", (key, fn) => this.deleteKey(key, fn));\n\t\tEvent.add(\"insertKey\", (key, isActive, fn) => this.insertKey(key, isActive, fn));\n\t\tEvent.add(\"activeKey\", (key, isActive) => this.activeKey(key, isActive));\n\n\t\tWebSocket.listen(\"scan\", (e: any, v: any) => {\n\t\t\tlet keys = v.keys || [];\n\n\t\t\tEvent.emit(\"progress\", (v.current / v.dbSize) * 100);\n\n\t\t\tfor (let index = 0; index < keys.length; index++) {\n\t\t\t\tDataTree.addKey(keys[index], this.shouldRefresh);\n\t\t\t}\n\n\t\t\tthis.dbSize = v.dbSize;\n\n\t\t\t// read done\n\t\t\tif (v.done) {\n\t\t\t\tEvent.emit(\"progress\", 0);\n\t\t\t\tthis.readDone();\n\t\t\t}\n\t\t\t// render tree\n\t\t\tthis.updateTree();\n\n\t\t\t// render databases\n\t\t\tthis.updateDatabases();\n\t\t});\n\t}\n\n\tactiveKey(key: string, isActive: boolean) {\n\t\tvar node = DataTree.search(DataTree.dataTree, key);\n\n\t\tif (!node) return;\n\t\tthis.selectedNode.active = false;\n\n\t\tthis.selectedNode = node;\n\t\tthis.selectedNode.active = isActive;\n\t\tif (isActive) {\n\t\t\tvar temp = node;\n\t\t\twhile (1) {\n\t\t\t\tif (!temp.parent) break;\n\t\t\t\ttemp.parent.toggled = true;\n\t\t\t\ttemp.parent.active = false;\n\t\t\t\ttemp = temp.parent;\n\t\t\t}\n\t\t}\n\t\tthis.updateTree();\n\t}\n\n\tdeleteKey(key: string, fn: any) {\n\t\tDataTree.deleteKey(key);\n\t\tthis.dbSize--;\n\t\tfn && fn();\n\t\tthis.updateDatabases();\n\t\tthis.updateTree();\n\t}\n\n\tinsertKey(key: string, isActive: boolean, fn: any) {\n\t\tDataTree.addKey(key, this.shouldRefresh, isActive);\n\t\tthis.dbSize++;\n\t\tfn && fn();\n\t\tthis.updateDatabases();\n\t\tthis.updateTree();\n\t}\n\n\treadDone() {\n\t\tmessage.info(\"数据加载成功\");\n\t\tif (this.shouldRefresh) {\n\t\t\tvar notRead = DataTree.checkRead(DataTree.dataTree);\n\t\t\tfor (let i = 0; i < notRead.length; i++) {\n\t\t\t\tDataTree.deleteKey(notRead[i].name);\n\t\t\t}\n\t\t}\n\t\tthis.shouldRefresh = false;\n\t\tLayer.close();\n\t}\n\n\tcomponentWillUnmount() {\n\t\tEvent.remove(\"connect\");\n\t\tEvent.remove(\"selectDB\");\n\t\tEvent.remove(\"disconnect\");\n\t\tEvent.remove(\"update\");\n\t\tEvent.remove(\"delete\");\n\t\tEvent.remove(\"deleteKey\");\n\t\tEvent.remove(\"insertKey\");\n\t\tEvent.remove(\"activeKey\");\n\t\tWebSocket.remove(\"scan\");\n\t\tDataTree.clear();\n\t}\n\n\tasync connect(serverName: any, connectType: string, fn?: any) {\n\t\tif (this.serverName === serverName) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.reset();\n\n\t\tthis.config = Config.getConfig(serverName);\n\t\tthis.connectType = connectType;\n\t\tthis.serverName = serverName;\n\t\tDataTree.setSplit(this.config.defaultSplit);\n\t\tlet res = await this.login();\n\t\tif (!res) return this.reset();\n\n\t\tConfig.setServerName(serverName);\n\n\t\tfor (let i = 0; i < parseInt(res); i++) {\n\t\t\tthis.state.databases.push({ title: `db-${i}`, key: i, size: 0 });\n\t\t}\n\n\t\tmessage.success(\"连接成功\");\n\n\t\tConfig.setCurrent(this.config);\n\n\t\tthis.updateDatabases();\n\n\t\tfn && fn();\n\n\t\tif (this.config.defaultDB) this.selectDB(parseInt(this.config.defaultDB));\n\t}\n\n\treset() {\n\t\tDataTree.clear();\n\t\tthis.config = {} as config;\n\t\tthis.serverName = \"\";\n\t\tthis.connectType = \"\";\n\t\tthis.dbSize = 0;\n\t\tthis.selectedNode = null;\n\t\tthis.shouldRefresh = false;\n\t\tthis.setState({ databases: [], dataTree: [], db: \"请选择DB\" });\n\t\tConfig.delDB();\n\t\tConfig.delServerName();\n\t\tConfig.delCurrent();\n\t\tEvent.emit(\"resetPanel\");\n\t}\n\n\tdisconnect(serverName: any) {\n\t\tif (this.serverName === serverName) {\n\t\t\tthis.reset();\n\t\t}\n\t}\n\n\tupdate(serverName: any) {}\n\n\tdelete(serverName: any) {\n\t\tif (this.serverName === serverName) {\n\t\t\tthis.reset();\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Rnd\n\t\t\t\tdefault={{ height: \"100%\", width: \"250px\", x: 0, y: 0 }}\n\t\t\t\tminWidth={250}\n\t\t\t\tmaxWidth={500}\n\t\t\t\tbounds=\".content\"\n\t\t\t\tenableResizing={{ right: true }}\n\t\t\t\tdisableDragging={true}\n\t\t\t\tclassName=\"key-tree\"\n\t\t\t>\n\t\t\t\t<div className=\"select-panel\">\n\t\t\t\t\t{this.state.databases.length > 0 ? (\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tvalue={this.state.db}\n\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\t\t\tlistHeight={600}\n\t\t\t\t\t\t\tonSelect={value => this.selectDB(value)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.state.databases.map(v => (\n\t\t\t\t\t\t\t\t<Option key={v.key} value={v.key}>\n\t\t\t\t\t\t\t\t\t{v.title} {v.size ? `(${v.size})` : \"\"}\n\t\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"data-tree\">\n\t\t\t\t\t{this.state.dataTree.length > 0 ? (\n\t\t\t\t\t\t<Treebeard\n\t\t\t\t\t\t\tdata={this.state.dataTree}\n\t\t\t\t\t\t\tonToggle={(node, toggled) => this.onToggle(node, toggled)}\n\t\t\t\t\t\t\tstyle={this.style}\n\t\t\t\t\t\t\tanimations={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"title\">\n\t\t\t\t\t{this.state.dataTree.length > 0 ? (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{this.serverName} {this.connectType}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Button type=\"link\" danger onClick={() => this.refresh()}>\n\t\t\t\t\t\t\t\t刷新\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t</Rnd>\n\t\t);\n\t}\n\n\trefresh(): void {\n\t\tthis.shouldRefresh = true;\n\t\tthis.selectDB(this.state.db);\n\t}\n\n\tstyle: any = {\n\t\ttree: {\n\t\t\tbase: {\n\t\t\t\tfontSize: \"12px\",\n\t\t\t\twhiteSpace: \"pre-wrap\",\n\t\t\t\tbackgroundColor: \"#ffffff\",\n\t\t\t\theight: \"100%\",\n\t\t\t\tpadding: \"5px\"\n\t\t\t},\n\t\t\tnode: { base: { color: \"red\" }, activeLink: { backgroundColor: \"#bae7ff\" } }\n\t\t}\n\t};\n\n\tonToggle(node: import(\"react-treebeard-ts\").TreeNode, toggled: boolean): void {\n\t\tif (this.selectedNode) {\n\t\t\tthis.selectedNode.active = false;\n\t\t}\n\n\t\tthis.selectedNode = node;\n\n\t\tthis.selectedNode.active = true;\n\n\t\tif (this.selectedNode.children) {\n\t\t\tthis.selectedNode.toggled = toggled;\n\t\t} else {\n\t\t\tthis.onSelect(node.name);\n\t\t}\n\n\t\tthis.updateTree();\n\t}\n\n\tasync onSelect(key: string) {\n\t\tlet type = await Command.type(key);\n\t\tEvent.emit(\"selectKey\", this.serverName, type, key);\n\t}\n\n\tasync login() {\n\t\tLayer.load();\n\t\tlet response = await Command.register(this.connectType, this.config);\n\t\tLayer.close();\n\t\tif (response.data.code !== 200) {\n\t\t\tTools.Notification(response);\n\t\t\treturn false;\n\t\t}\n\t\treturn response.data.msg[1];\n\t}\n\n\tasync selectDB(db: any, fn?: any) {\n\t\tif (this.state.db !== db) DataTree.clear();\n\t\tLayer.load();\n\t\tthis.state.db = db;\n\t\tlet response = await Command.selectDB(this.serverName, db);\n\t\tif (response.data.code !== 200) return Tools.Notification(response);\n\t\tConfig.setDB(db);\n\t\tawait Command.scan(this.config.defaultFilter);\n\t\tfn && fn();\n\t}\n}\n","import { notification } from \"antd\";\nimport Command from \"../services/Command\";\n\nclass Transform {\n\tcheck(type: string): any {\n\t\tswitch (type) {\n\t\t\tcase \"string\":\n\t\t\t\treturn new RString();\n\t\t\tcase \"list\":\n\t\t\t\treturn new List();\n\t\t\tcase \"hash\":\n\t\t\t\treturn new Hash();\n\t\t\tcase \"set\":\n\t\t\t\treturn new Set();\n\t\t\tcase \"zset\":\n\t\t\t\treturn new ZSet();\n\t\t\tdefault:\n\t\t\t\tnotification.error({ message: `Unsupported type ${type}` });\n\t\t\t\treturn new Empty();\n\t\t}\n\t}\n\n\tselect(type: string, key: string, ...args: any[]) {\n\t\treturn this.do(key, this.check(type).select(key, ...args));\n\t}\n\n\tupdate(type: string, key: string, value: any, ...args: any[]) {\n\t\treturn this.do(key, this.check(type).update(key, value, ...args));\n\t}\n\n\tinsert(type: string, key: string, value: any, ...args: any[]) {\n\t\treturn this.do(key, this.check(type).insert(key, value, ...args));\n\t}\n\n\tdelete(type: string, key: string, ...args: any[]) {\n\t\treturn this.do(key, this.check(type).delete(key, ...args));\n\t}\n\n\tcall(type: string, key: string, method: string, ...args: any[]) {\n\t\treturn this.do(key, this.check(type)[method](key, ...args));\n\t}\n\n\tttl(key: string) {\n\t\treturn this.do(key, [\"TTL\", key]);\n\t}\n\n\trename(key: string, newKey: string) {\n\t\treturn this.do(key, [\"RENAME\", key, newKey]);\n\t}\n\n\texpire(key: string, seconds: number) {\n\t\treturn this.do(key, [\"EXPIRE\", key, seconds]);\n\t}\n\n\tasync doPipe(key: string, cmd: any[][]) {\n\t\treturn await Command.doPipe(key, cmd);\n\t}\n\n\tasync do(key: string, cmd: any[]) {\n\t\treturn await Command.do(key, cmd);\n\t}\n}\n\nclass RString {\n\tselect(key: string) {\n\t\treturn [\"GET\", key];\n\t}\n\tupdate(key: string, value: string) {\n\t\treturn [\"SET\", key, value];\n\t}\n\tinsert(key: string, value: string) {\n\t\treturn [\"SET\", key, value];\n\t}\n\tdelete(key: string) {\n\t\treturn [\"DEL\", key];\n\t}\n}\nclass List {\n\tlen(key: string) {\n\t\treturn [\"LLEN\", key];\n\t}\n\n\tinsert(key: string, value: string) {\n\t\treturn [\"LPUSH\", key, value];\n\t}\n\n\tselect(key: string, page: number, size: number) {\n\t\tlet skip = (page - 1) * size;\n\t\treturn [\"LRANGE\", key, skip, size * page - 1];\n\t}\n\n\tupdate(key: string, index: number, value: string) {\n\t\treturn [\"LSET\", key, index, value];\n\t}\n\n\tdelete(key: string, value: string) {\n\t\treturn [\"LREM\", key, 0, value];\n\t}\n\n\tremove(key: string) {\n\t\treturn [\"DEL\", key];\n\t}\n}\nclass Hash {\n\tselect(key: string, curser: number) {\n\t\treturn [\"HSCAN\", key, curser, \"COUNT\", 10000];\n\t}\n\n\tlen(key: string) {\n\t\treturn [\"HLEN\", key];\n\t}\n\n\tupdate(key: string, k: string, v: string) {\n\t\treturn [\"HSET\", key, k, v];\n\t}\n\n\tinsert(key: string, k: string, v: string) {\n\t\treturn [\"HSET\", key, k, v];\n\t}\n\n\tdelete(key: string, k: string) {\n\t\treturn [\"HDEL\", key, k];\n\t}\n\n\tremove(key: string) {\n\t\treturn [\"DEL\", key];\n\t}\n}\nclass Set {\n\tlen(key: string) {\n\t\treturn [\"SCARD\", key];\n\t}\n\n\tinsert(key: string, value: string) {\n\t\treturn [\"SADD\", key, value];\n\t}\n\n\tselect(key: string, curser: number) {\n\t\treturn [\"SSCAN\", key, curser, \"COUNT\", 10000];\n\t}\n\n\tupdate(key: string, value: string) {\n\t\treturn [\"SADD\", key, value];\n\t}\n\n\tdelete(key: string, value: string) {\n\t\treturn [\"SREM\", key, value];\n\t}\n\n\tremove(key: string) {\n\t\treturn [\"DEL\", key];\n\t}\n}\nclass ZSet {\n\tlen(key: string) {\n\t\treturn [\"ZCARD\", key];\n\t}\n\n\tinsert(key: string, score: number, value: string) {\n\t\treturn [\"ZADD\", key, score, value];\n\t}\n\n\tselect(key: string, page: number, size: number) {\n\t\tlet skip = (page - 1) * size;\n\t\treturn [\"ZRANGE\", key, skip, size * page - 1, \"WITHSCORES\"];\n\t}\n\n\tupdate(key: string, score: number, value: string) {\n\t\treturn [\"ZADD\", key, score, value];\n\t}\n\n\tdelete(key: string, value: string) {\n\t\treturn [\"ZREM\", key, value];\n\t}\n\n\tremove(key: string) {\n\t\treturn [\"DEL\", key];\n\t}\n}\nclass Empty {\n\tselect() {}\n}\n\nexport default new Transform();\n","import React, { Component } from \"react\";\nimport Event from \"../../../event/Event\";\nimport Transform from \"../../../transform/Transform\";\nimport \"./string.scss\";\nimport { Input, Button, Select, Modal, Popconfirm, message } from \"antd\";\nimport { QuestionCircleOutlined } from \"@ant-design/icons\";\nimport Panel from \"../Panel\";\nconst { TextArea } = Input;\n\nconst Option = Select.Option;\n\ntype Props = {\n\ttype: string;\n\tkeys: string;\n\tparent: Panel;\n};\n\nexport default class String extends Component<Props> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.type = this.props.type;\n\t\tthis.key = this.props.keys;\n\t\tthis.parent = this.props.parent;\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.select(this.type, this.key);\n\t}\n\n\tcomponentWillUnmount() {}\n\n\tparent: Panel;\n\tstate = { key: \"\", showValue: \"\", rename: false, view: \"显示格式\" };\n\n\ttype = \"\";\n\tkey = \"\";\n\tttl = -1;\n\n\tasync select(type: string, key: string) {\n\t\tthis.type = type;\n\t\tthis.key = key;\n\t\tlet value = await Transform.select(type, key);\n\t\tlet ttl = await Transform.ttl(key);\n\t\tthis.ttl = ttl;\n\t\tthis.setState({ key: key, showValue: value });\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"string\">\n\t\t\t\t<Modal\n\t\t\t\t\tvisible={this.state.rename}\n\t\t\t\t\tmaskClosable={false}\n\t\t\t\t\tclosable={false}\n\t\t\t\t\tonOk={() => this.renameKey()}\n\t\t\t\t\tonCancel={() => this.closeRename()}\n\t\t\t\t\twidth={300}\n\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\tvalue={this.state.key}\n\t\t\t\t\t\tonChange={value => this.setState({ key: value.target.value })}\n\t\t\t\t\t></Input>\n\t\t\t\t</Modal>\n\n\t\t\t\t<div className=\"top\">\n\t\t\t\t\t<div className=\"top\">\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\taddonBefore={this.type.toUpperCase()}\n\t\t\t\t\t\t\taddonAfter={`TTL: ${this.ttl}`}\n\t\t\t\t\t\t\tvalue={this.state.key}\n\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button type=\"default\" onClick={() => this.openRename()}>\n\t\t\t\t\t\t\t重命名\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button type=\"primary\" onClick={() => this.select(this.type, this.state.key)}>\n\t\t\t\t\t\t\t刷新\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Popconfirm\n\t\t\t\t\t\t\ttitle={`确定要删除 ${this.key} 吗?`}\n\t\t\t\t\t\t\tonConfirm={() => this.deleteKey()}\n\t\t\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t\t\t\ticon={<QuestionCircleOutlined style={{ color: \"red\" }} />}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Button type=\"dashed\" danger>\n\t\t\t\t\t\t\t\t删除\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"bottom\">\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tvalue={this.state.view}\n\t\t\t\t\t\t\tstyle={{ width: 100 }}\n\t\t\t\t\t\t\tonSelect={value => this.changeView(value)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Option key=\"plain/text\" value=\"plain/text\">\n\t\t\t\t\t\t\t\tplain/text\n\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t\t<Option key=\"json\" value=\"json\">\n\t\t\t\t\t\t\t\tjson\n\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"content\">\n\t\t\t\t\t<TextArea\n\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\tvalue={this.state.showValue}\n\t\t\t\t\t\tonChange={value => this.onChange(value.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"bottom\">\n\t\t\t\t\t<div className=\"top\">\n\t\t\t\t\t\t<Popconfirm\n\t\t\t\t\t\t\ttitle={`确定要保存吗?`}\n\t\t\t\t\t\t\tonConfirm={() => this.save()}\n\t\t\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t\t\t\ticon={<QuestionCircleOutlined style={{ color: \"red\" }} />}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Button type=\"primary\">保存</Button>\n\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"bottom\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\tasync save() {\n\t\tlet r = await Transform.update(this.type, this.key, this.state.showValue);\n\t\tif (!r) return;\n\t\tmessage.success(\"保存成功\");\n\t}\n\tchangeView(view: string): void {\n\t\tswitch (view) {\n\t\t\tcase \"json\":\n\t\t\t\ttry {\n\t\t\t\t\tvar v = JSON.parse(this.state.showValue);\n\t\t\t\t\tthis.setState({ view: view, showValue: JSON.stringify(v, null, 4) });\n\t\t\t\t} catch (error) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"text\":\n\t\t\t\ttry {\n\t\t\t\t\tvar v = JSON.parse(this.state.showValue);\n\t\t\t\t\tthis.setState({ view: view, showValue: JSON.stringify(v) });\n\t\t\t\t} catch (error) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tasync deleteKey() {\n\t\tvar r = await Transform.delete(this.type, this.state.key);\n\t\tif (!r) return;\n\t\tEvent.emit(\"deleteKey\", this.key);\n\t\tthis.parent.remove(this.key);\n\t}\n\n\tasync renameKey() {\n\t\tlet oldKey = this.key;\n\t\tlet newKey = this.state.key;\n\t\tthis.key = this.state.key;\n\t\tvar r = await Transform.rename(oldKey, newKey);\n\t\tif (!r) return this.closeRename();\n\t\tEvent.emit(\"insertKey\", newKey, true);\n\t\tEvent.emit(\"deleteKey\", oldKey);\n\t\tEvent.emit(\"activeKey\", oldKey, false);\n\t\tEvent.emit(\"activeKey\", newKey, true);\n\t\tthis.closeRename();\n\t\tthis.parent.update(this.type, oldKey, newKey);\n\t}\n\n\tcloseRename(): void {\n\t\tthis.setState({ rename: false });\n\t}\n\n\topenRename(): void {\n\t\tthis.setState({ rename: true });\n\t}\n\n\tonChange(value: string): void {\n\t\tthis.setState({ showValue: value });\n\t}\n}\n","import React, { Component } from \"react\";\nimport Event from \"../../../event/Event\";\nimport Transform from \"../../../transform/Transform\";\nimport \"./list.scss\";\nimport { Input, Button, Select, Modal, Popconfirm, message } from \"antd\";\nimport { QuestionCircleOutlined, LeftOutlined, RightOutlined } from \"@ant-design/icons\";\nimport Panel from \"../Panel\";\nimport { List as VList, AutoSizer } from \"react-virtualized\";\n\nconst { TextArea } = Input;\n\nconst Option = Select.Option;\n\ntype Props = {\n\ttype: string;\n\tkeys: string;\n\tparent: Panel;\n};\n\nexport default class List extends Component<Props> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.type = this.props.type;\n\t\tthis.key = this.props.keys;\n\t\tthis.parent = this.props.parent;\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.select(this.type, this.key);\n\t}\n\n\tcomponentWillUnmount() {}\n\n\tparent: Panel;\n\tstate = {\n\t\tkey: \"\",\n\t\tshowValue: \"\",\n\t\tlist: [] as any[],\n\t\tpage: 1,\n\t\trename: false,\n\t\taddRow: false,\n\t\taddRowValue: \"\",\n\t\tview: \"显示格式\"\n\t};\n\n\ttype = \"\";\n\tkey = \"\";\n\tttl = -1;\n\tsize = 1000;\n\tlen = 0;\n\n\tselectIndex = 0;\n\tpage = 1;\n\tlistIndex = 0;\n\n\tasync select(type: string, key: string): Promise<void> {\n\t\tthis.type = type;\n\t\tthis.key = key;\n\t\tlet len = await Transform.call(type, key, \"len\");\n\t\tthis.len = len;\n\t\tlet ttl = await Transform.ttl(key);\n\t\tthis.ttl = ttl;\n\n\t\tthis.page = this.state.page;\n\t\tlet listArray = await Transform.select(type, key, this.state.page, this.size);\n\t\tif (listArray === false) return;\n\n\t\tif (this.selectIndex >= listArray.length - 1) {\n\t\t\tif (listArray.length === 0) {\n\t\t\t\tif (this.state.page > 1) {\n\t\t\t\t\tthis.selectIndex = 0;\n\t\t\t\t\tthis.state.page--;\n\t\t\t\t\treturn await this.select(type, key);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tthis.selectIndex = listArray.length - 1;\n\t\t\t}\n\t\t}\n\n\t\tif (this.selectIndex >= listArray.length - 1) this.selectIndex = listArray.length - 1;\n\t\tthis.listIndex = (this.page - 1) * this.size + this.selectIndex;\n\n\t\tlet { list } = this.state;\n\t\tlist = [];\n\t\tfor (let i = 0; i < listArray.length; i++) {\n\t\t\tlist.push({ value: listArray[i], select: i === this.selectIndex });\n\t\t}\n\n\t\tthis.setState({ key, list, showValue: listArray[this.selectIndex] }, () => {\n\t\t\tthis.vlist.current?.forceUpdateGrid();\n\t\t});\n\t}\n\n\tvlist: React.RefObject<VList> = React.createRef();\n\n\tonScroll = (value: any) => {\n\t\t// console.log(value);\n\t\t// clientHeight + scrollTop = scrollHeight\n\t};\n\n\trenderItem = (value: any) => {\n\t\tif (value.index > this.state.list.length - 1) return;\n\n\t\tif (this.state.list[value.index].select) {\n\t\t\tvalue.style = Object.assign({ background: \"rgb(186, 231, 225)\" }, value.style);\n\t\t}\n\t\treturn (\n\t\t\t<div key={value.index} style={value.style} className=\"list-item\" onClick={el => this.selectItem(el, value)}>\n\t\t\t\t<div className=\"key\">{(this.page - 1) * this.size + value.index + 1}</div>\n\t\t\t\t<div className=\"value\">{this.state.list[value.index].value}</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tselectItem(el: React.MouseEvent<HTMLDivElement, MouseEvent>, value: any) {\n\t\tlet { list } = this.state;\n\t\tlist[this.selectIndex].select = false;\n\n\t\tthis.selectIndex = value.index;\n\t\tlist[value.index].select = true;\n\n\t\tthis.listIndex = (this.page - 1) * this.size + value.index;\n\n\t\tthis.setState({ list, showValue: list[value.index].value }, () => {\n\t\t\tthis.vlist.current?.forceUpdateGrid();\n\t\t});\n\t}\n\n\tasync delRow() {\n\t\tif (this.len === 1) return this.deleteKey();\n\t\tlet u = await Transform.update(this.type, this.key, this.listIndex, \"@--LEMO-YXK--@\");\n\t\tif (!u) return;\n\t\tlet d = await Transform.delete(this.type, this.key, \"@--LEMO-YXK--@\");\n\t\tif (!d) return;\n\n\t\tif (this.listIndex === this.len - 1) {\n\t\t\tthis.selectIndex--;\n\t\t\tthis.listIndex--;\n\t\t}\n\n\t\tthis.select(this.type, this.key);\n\t\tmessage.success(\"删除成功!\");\n\t}\n\n\tasync addRow() {\n\t\tlet r = await Transform.insert(this.type, this.key, this.state.addRowValue);\n\t\tif (!r) return;\n\n\t\tthis.state.addRowValue = \"\";\n\t\tthis.selectIndex++;\n\t\tthis.listIndex++;\n\n\t\tthis.select(this.type, this.key);\n\t\tmessage.success(\"添加成功!\");\n\t\tthis.closeAddRow();\n\t}\n\n\tprevPage = () => {\n\t\tif (this.state.page <= 1 || !this.state.page) return;\n\t\tthis.state.page--;\n\t\tthis.setPage(this.state.page);\n\t\tthis.go();\n\t};\n\n\tnextPage = () => {\n\t\tif (this.state.page >= Math.ceil(this.len / this.size) || !this.state.page) return;\n\t\tthis.state.page++;\n\t\tthis.setPage(this.state.page);\n\t\tthis.go();\n\t};\n\n\tgo = () => {\n\t\tthis.select(this.type, this.key);\n\t};\n\n\tsetPage(page: any) {\n\t\tif (page === \"\") return this.setState({ page });\n\t\tpage = parseInt(page) || 1;\n\t\tif (page < 1 || page > Math.ceil(this.len / this.size)) return;\n\t\tthis.setState({ page });\n\t}\n\n\tasync save() {\n\t\tlet r = await Transform.update(this.type, this.key, this.listIndex, this.state.showValue);\n\t\tif (!r) return;\n\t\tlet { list } = this.state;\n\t\tlist[this.selectIndex].value = this.state.showValue;\n\t\tthis.setState({ list }, () => {\n\t\t\tthis.vlist.current?.forceUpdateGrid();\n\t\t});\n\t\tmessage.success(\"保存成功\");\n\t}\n\n\tchangeView(view: string): void {\n\t\tswitch (view) {\n\t\t\tcase \"json\":\n\t\t\t\ttry {\n\t\t\t\t\tvar v = JSON.parse(this.state.showValue);\n\t\t\t\t\tthis.setState({ view: view, showValue: JSON.stringify(v, null, 4) });\n\t\t\t\t} catch (error) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"text\":\n\t\t\t\ttry {\n\t\t\t\t\tvar v = JSON.parse(this.state.showValue);\n\t\t\t\t\tthis.setState({ view: view, showValue: JSON.stringify(v) });\n\t\t\t\t} catch (error) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tasync deleteKey() {\n\t\tvar r = await Transform.call(this.type, this.state.key, \"remove\");\n\t\tif (!r) return;\n\t\tEvent.emit(\"deleteKey\", this.key);\n\t\tthis.parent.remove(this.key);\n\t}\n\n\tasync renameKey() {\n\t\tlet oldKey = this.key;\n\t\tlet newKey = this.state.key;\n\t\tthis.key = this.state.key;\n\t\tvar r = await Transform.rename(oldKey, newKey);\n\t\tif (!r) return this.closeRename();\n\t\tEvent.emit(\"insertKey\", newKey, true);\n\t\tEvent.emit(\"deleteKey\", oldKey);\n\t\tEvent.emit(\"activeKey\", oldKey, false);\n\t\tEvent.emit(\"activeKey\", newKey, true);\n\t\tthis.closeRename();\n\t\tthis.parent.update(this.type, oldKey, newKey);\n\t}\n\n\tcloseRename(): void {\n\t\tthis.setState({ rename: false });\n\t}\n\n\topenRename(): void {\n\t\tthis.setState({ rename: true });\n\t}\n\n\tcloseAddRow(): void {\n\t\tthis.setState({ addRow: false });\n\t}\n\n\topenAddRow(): void {\n\t\tthis.setState({ addRow: true });\n\t}\n\n\tonChange(value: string): void {\n\t\tthis.setState({ showValue: value });\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"list\">\n\t\t\t\t<Modal\n\t\t\t\t\tvisible={this.state.rename}\n\t\t\t\t\tmaskClosable={false}\n\t\t\t\t\tclosable={false}\n\t\t\t\t\tonOk={() => this.renameKey()}\n\t\t\t\t\tonCancel={() => this.closeRename()}\n\t\t\t\t\twidth={300}\n\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\tvalue={this.state.key}\n\t\t\t\t\t\tonChange={value => this.setState({ key: value.target.value })}\n\t\t\t\t\t></Input>\n\t\t\t\t</Modal>\n\n\t\t\t\t<Modal\n\t\t\t\t\tvisible={this.state.addRow}\n\t\t\t\t\tmaskClosable={false}\n\t\t\t\t\tclosable={false}\n\t\t\t\t\tonOk={() => this.addRow()}\n\t\t\t\t\tonCancel={() => this.closeAddRow()}\n\t\t\t\t\twidth={300}\n\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\tvalue={this.state.addRowValue}\n\t\t\t\t\t\tonChange={value => this.setState({ addRowValue: value.target.value })}\n\t\t\t\t\t></Input>\n\t\t\t\t</Modal>\n\n\t\t\t\t<div className=\"top\">\n\t\t\t\t\t<div className=\"top\">\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\taddonBefore={this.type.toUpperCase()}\n\t\t\t\t\t\t\taddonAfter={`TTL: ${this.ttl} SIZE: ${this.len}`}\n\t\t\t\t\t\t\tvalue={this.state.key}\n\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button type=\"default\" onClick={() => this.openRename()}>\n\t\t\t\t\t\t\t重命名\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button type=\"primary\" onClick={() => this.select(this.type, this.state.key)}>\n\t\t\t\t\t\t\t刷新\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Popconfirm\n\t\t\t\t\t\t\ttitle={`确定要删除 ${this.key} 吗?`}\n\t\t\t\t\t\t\tonConfirm={() => this.deleteKey()}\n\t\t\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t\t\t\ticon={<QuestionCircleOutlined style={{ color: \"red\" }} />}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Button type=\"dashed\" danger>\n\t\t\t\t\t\t\t\t删除\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"bottom\">\n\t\t\t\t\t\t<div className=\"left\">\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tvalue={this.state.view}\n\t\t\t\t\t\t\t\tstyle={{ width: 100 }}\n\t\t\t\t\t\t\t\tonSelect={value => this.changeView(value)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Option key=\"plain/text\" value=\"plain/text\">\n\t\t\t\t\t\t\t\t\tplain/text\n\t\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t\t\t<Option key=\"json\" value=\"json\">\n\t\t\t\t\t\t\t\t\tjson\n\t\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t<Popconfirm\n\t\t\t\t\t\t\t\ttitle={`确定要删除 ${this.state.showValue} 吗?`}\n\t\t\t\t\t\t\t\tonConfirm={() => this.delRow()}\n\t\t\t\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t\t\t\t\ticon={<QuestionCircleOutlined style={{ color: \"red\" }} />}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Button>删除行</Button>\n\t\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t\t\t<Button onClick={() => this.openAddRow()}>添加行</Button>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"right\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"content\">\n\t\t\t\t\t<div className=\"left\">\n\t\t\t\t\t\t{this.state.list.length > 0 ? (\n\t\t\t\t\t\t\t<AutoSizer>\n\t\t\t\t\t\t\t\t{({ width, height }) => (\n\t\t\t\t\t\t\t\t\t<VList\n\t\t\t\t\t\t\t\t\t\tref={this.vlist}\n\t\t\t\t\t\t\t\t\t\t// className={styles.List}\n\t\t\t\t\t\t\t\t\t\theight={height}\n\t\t\t\t\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\t\t\t\t\toverscanRowCount={20}\n\t\t\t\t\t\t\t\t\t\t// noRowsRenderer={this._noRowsRenderer}\n\t\t\t\t\t\t\t\t\t\trowCount={this.state.list.length}\n\t\t\t\t\t\t\t\t\t\trowHeight={height / 20}\n\t\t\t\t\t\t\t\t\t\trowRenderer={this.renderItem}\n\t\t\t\t\t\t\t\t\t\t// scrollToIndex={this.selectIndex}\n\t\t\t\t\t\t\t\t\t\tscrollToAlignment=\"end\"\n\t\t\t\t\t\t\t\t\t\tonScroll={this.onScroll}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</AutoSizer>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"right\">\n\t\t\t\t\t\t<TextArea\n\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\tvalue={this.state.showValue}\n\t\t\t\t\t\t\tonChange={value => this.onChange(value.target.value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"bottom\">\n\t\t\t\t\t<div className=\"top\">\n\t\t\t\t\t\t<div className=\"left\">\n\t\t\t\t\t\t\t<Button onClick={this.prevPage}>\n\t\t\t\t\t\t\t\t<LeftOutlined />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button onClick={this.nextPage}>\n\t\t\t\t\t\t\t\t<RightOutlined />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tonBlur={() => this.setPage(this.state.page || this.page)}\n\t\t\t\t\t\t\t\tvalue={this.state.page}\n\t\t\t\t\t\t\t\tonChange={value => this.setPage(value.target.value)}\n\t\t\t\t\t\t\t></Input>\n\t\t\t\t\t\t\t<Button onClick={this.go}>GO</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"right\">\n\t\t\t\t\t\t\t<Popconfirm\n\t\t\t\t\t\t\t\ttitle={`确定要保存吗?`}\n\t\t\t\t\t\t\t\tonConfirm={() => this.save()}\n\t\t\t\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t\t\t\t\ticon={<QuestionCircleOutlined style={{ color: \"red\" }} />}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Button type=\"primary\">保存</Button>\n\t\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"bottom\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { Component } from \"react\";\nimport Event from \"../../../event/Event\";\nimport Transform from \"../../../transform/Transform\";\nimport \"./hash.scss\";\nimport { Input, Button, Select, Modal, Popconfirm, message } from \"antd\";\nimport { QuestionCircleOutlined, LeftOutlined, RightOutlined } from \"@ant-design/icons\";\nimport Panel from \"../Panel\";\nimport { List as VList, AutoSizer } from \"react-virtualized\";\n\nconst { TextArea } = Input;\n\nconst Option = Select.Option;\n\ntype Props = {\n\ttype: string;\n\tkeys: string;\n\tparent: Panel;\n};\n\nexport default class Hash extends Component<Props> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.type = this.props.type;\n\t\tthis.key = this.props.keys;\n\t\tthis.parent = this.props.parent;\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadAllData(this.type, this.key);\n\t}\n\n\tcomponentWillUnmount() {}\n\n\tparent: Panel;\n\tstate = {\n\t\tkey: \"\",\n\t\tshowValue: \"\",\n\t\tshowKey: \"\",\n\t\tlist: [] as any[],\n\t\tpage: 1,\n\t\trename: false,\n\t\taddRow: false,\n\t\taddRowValue: \"\",\n\t\taddRowKey: \"\",\n\t\tview: \"显示格式\"\n\t};\n\n\ttype = \"\";\n\tkey = \"\";\n\tttl = -1;\n\tsize = 1000;\n\tlen = 0;\n\n\tselectIndex = 0;\n\tpage = 1;\n\tlistIndex = 0;\n\n\tallData: any[] = [];\n\n\tasync loadAllData(type: string, key: string) {\n\t\tthis.allData = [];\n\t\tvar cursor = 0;\n\t\tvar res: any = {};\n\t\twhile (1) {\n\t\t\tlet r = await Transform.select(type, key, cursor);\n\t\t\tif (!r) return;\n\t\t\tcursor = parseInt(r[0]);\n\t\t\tfor (let i = 0; i < r[1].length; i += 2) {\n\t\t\t\tconst key = r[1][i];\n\t\t\t\tconst value = r[1][i + 1];\n\t\t\t\tres[key] = value;\n\t\t\t}\n\t\t\tif (cursor === 0) break;\n\t\t}\n\t\tfor (const key in res) {\n\t\t\tthis.allData.push({ key: key, value: res[key] });\n\t\t}\n\n\t\tthis.select(type, key);\n\t}\n\n\tasync select(type: string, key: string): Promise<void> {\n\t\tthis.type = type;\n\t\tthis.key = key;\n\t\tlet len = await Transform.call(type, key, \"len\");\n\t\tthis.len = len;\n\t\tlet ttl = await Transform.ttl(key);\n\t\tthis.ttl = ttl;\n\n\t\tthis.page = this.state.page;\n\t\tlet listArray = this.allData.slice((this.page - 1) * this.size, (this.page - 1) * this.size + this.size);\n\n\t\tif (this.selectIndex >= listArray.length - 1) {\n\t\t\tif (listArray.length === 0) {\n\t\t\t\tif (this.state.page > 1) {\n\t\t\t\t\tthis.selectIndex = 0;\n\t\t\t\t\tthis.state.page--;\n\t\t\t\t\treturn await this.select(type, key);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tthis.selectIndex = listArray.length - 1;\n\t\t\t}\n\t\t}\n\n\t\tif (this.selectIndex >= listArray.length - 1) this.selectIndex = listArray.length - 1;\n\t\tthis.listIndex = (this.page - 1) * this.size + this.selectIndex;\n\n\t\tlet { list } = this.state;\n\t\tlist = [];\n\t\tfor (let i = 0; i < listArray.length; i++) {\n\t\t\tlist.push({ key: listArray[i].key, value: listArray[i].value, select: i === this.selectIndex });\n\t\t}\n\n\t\tthis.setState(\n\t\t\t{ key, list, showValue: listArray[this.selectIndex].value, showKey: listArray[this.selectIndex].key },\n\t\t\t() => {\n\t\t\t\tthis.vlist.current?.forceUpdateGrid();\n\t\t\t}\n\t\t);\n\t}\n\n\tvlist: React.RefObject<VList> = React.createRef();\n\n\tonScroll = (value: any) => {\n\t\t// console.log(value);\n\t\t// clientHeight + scrollTop = scrollHeight\n\t};\n\n\trenderItem = (value: any) => {\n\t\tif (value.index > this.state.list.length - 1) return;\n\n\t\tif (this.state.list[value.index].select) {\n\t\t\tvalue.style = Object.assign({ background: \"rgb(186, 231, 225)\" }, value.style);\n\t\t}\n\t\treturn (\n\t\t\t<div key={value.index} style={value.style} className=\"list-item\" onClick={el => this.selectItem(el, value)}>\n\t\t\t\t<div className=\"i\">{(this.page - 1) * this.size + value.index + 1}</div>\n\t\t\t\t<div className=\"key\">{this.state.list[value.index].key}</div>\n\t\t\t\t<div className=\"value\">{this.state.list[value.index].value}</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tselectItem(el: React.MouseEvent<HTMLDivElement, MouseEvent>, value: any) {\n\t\tlet { list } = this.state;\n\t\tlist[this.selectIndex].select = false;\n\n\t\tthis.selectIndex = value.index;\n\t\tlist[value.index].select = true;\n\n\t\tthis.listIndex = (this.page - 1) * this.size + value.index;\n\n\t\tthis.setState({ list, showValue: list[value.index].value, showKey: list[value.index].key }, () => {\n\t\t\tthis.vlist.current?.forceUpdateGrid();\n\t\t});\n\t}\n\n\tasync delRow() {\n\t\tlet item = this.state.list[this.selectIndex];\n\t\tif (this.len === 1) return this.deleteKey();\n\t\tlet d = await Transform.delete(this.type, this.key, item.key);\n\t\tif (d === false) return;\n\n\t\tthis.allData.splice(this.listIndex, 1);\n\n\t\tif (this.listIndex === this.len - 1) {\n\t\t\tthis.selectIndex--;\n\t\t\tthis.listIndex--;\n\t\t}\n\n\t\tthis.select(this.type, this.key);\n\t\tmessage.success(\"删除成功!\");\n\t}\n\n\tasync addRow() {\n\t\tlet r = await Transform.insert(this.type, this.key, this.state.addRowKey, this.state.addRowValue);\n\t\tif (r === false) return;\n\t\tif (r === 0) {\n\t\t\tthis.filter(this.state.addRowKey);\n\t\t}\n\n\t\tthis.allData.splice(this.listIndex, 0, { value: this.state.addRowValue, key: this.state.addRowKey });\n\n\t\tthis.state.addRowValue = \"\";\n\t\tthis.state.addRowKey = \"\";\n\t\tthis.selectIndex++;\n\t\tthis.listIndex++;\n\n\t\tthis.select(this.type, this.key);\n\t\tmessage.success(\"添加成功!\");\n\t\tthis.closeAddRow();\n\t}\n\n\tprevPage = () => {\n\t\tif (this.state.page <= 1 || !this.state.page) return;\n\t\tthis.state.page--;\n\t\tthis.setPage(this.state.page);\n\t\tthis.go();\n\t};\n\n\tnextPage = () => {\n\t\tif (this.state.page >= Math.ceil(this.len / this.size) || !this.state.page) return;\n\t\tthis.state.page++;\n\t\tthis.setPage(this.state.page);\n\t\tthis.go();\n\t};\n\n\tgo = () => {\n\t\tthis.select(this.type, this.key);\n\t};\n\n\tsetPage(page: any) {\n\t\tif (page === \"\") return this.setState({ page });\n\t\tpage = parseInt(page) || 1;\n\t\tif (page < 1 || page > Math.ceil(this.len / this.size)) return;\n\t\tthis.setState({ page });\n\t}\n\n\tfilter(key: string) {\n\t\tfor (let i = 0; i < this.allData.length; i++) {\n\t\t\tconst element = this.allData[i];\n\t\t\tif (element.key === key) {\n\t\t\t\tthis.allData.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync save() {\n\t\tlet item = this.state.list[this.selectIndex];\n\n\t\t// delete\n\t\tlet d = await Transform.delete(this.type, this.key, item.key);\n\t\tif (d === false) return;\n\n\t\tthis.allData.splice(this.listIndex, 1);\n\n\t\t// add\n\t\tlet r = await Transform.insert(this.type, this.key, this.state.showKey, this.state.showValue);\n\t\tif (r === false) return;\n\t\tif (r === 0) {\n\t\t\tthis.filter(this.state.showKey);\n\t\t}\n\t\tthis.allData.splice(this.listIndex, 0, { value: this.state.showValue, key: this.state.showKey });\n\n\t\tthis.select(this.type, this.key);\n\n\t\tmessage.success(\"保存成功\");\n\t}\n\n\tchangeView(view: string): void {\n\t\tswitch (view) {\n\t\t\tcase \"json\":\n\t\t\t\ttry {\n\t\t\t\t\tvar v = JSON.parse(this.state.showValue);\n\t\t\t\t\tthis.setState({ view: view, showValue: JSON.stringify(v, null, 4) });\n\t\t\t\t} catch (error) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"text\":\n\t\t\t\ttry {\n\t\t\t\t\tvar v = JSON.parse(this.state.showValue);\n\t\t\t\t\tthis.setState({ view: view, showValue: JSON.stringify(v) });\n\t\t\t\t} catch (error) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tasync deleteKey() {\n\t\tvar r = await Transform.call(this.type, this.state.key, \"remove\");\n\t\tif (!r) return;\n\t\tEvent.emit(\"deleteKey\", this.key);\n\t\tthis.parent.remove(this.key);\n\t}\n\n\tasync renameKey() {\n\t\tlet oldKey = this.key;\n\t\tlet newKey = this.state.key;\n\t\tthis.key = this.state.key;\n\t\tvar r = await Transform.rename(oldKey, newKey);\n\t\tif (!r) return this.closeRename();\n\t\tEvent.emit(\"insertKey\", newKey, true);\n\t\tEvent.emit(\"deleteKey\", oldKey);\n\t\tEvent.emit(\"activeKey\", oldKey, false);\n\t\tEvent.emit(\"activeKey\", newKey, true);\n\t\tthis.closeRename();\n\t\tthis.parent.update(this.type, oldKey, newKey);\n\t}\n\n\tcloseRename(): void {\n\t\tthis.setState({ rename: false });\n\t}\n\n\topenRename(): void {\n\t\tthis.setState({ rename: true });\n\t}\n\n\tcloseAddRow(): void {\n\t\tthis.setState({ addRow: false });\n\t}\n\n\topenAddRow(): void {\n\t\tthis.setState({ addRow: true });\n\t}\n\n\tonChangeShowValue(value: string): void {\n\t\tthis.setState({ showValue: value });\n\t}\n\n\tonChangeShowKey(value: string): void {\n\t\tthis.setState({ showKey: value });\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"hash\">\n\t\t\t\t<Modal\n\t\t\t\t\tvisible={this.state.rename}\n\t\t\t\t\tmaskClosable={false}\n\t\t\t\t\tclosable={false}\n\t\t\t\t\tonOk={() => this.renameKey()}\n\t\t\t\t\tonCancel={() => this.closeRename()}\n\t\t\t\t\twidth={300}\n\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\tvalue={this.state.key}\n\t\t\t\t\t\tonChange={value => this.setState({ key: value.target.value })}\n\t\t\t\t\t></Input>\n\t\t\t\t</Modal>\n\n\t\t\t\t<Modal\n\t\t\t\t\tvisible={this.state.addRow}\n\t\t\t\t\tmaskClosable={false}\n\t\t\t\t\tclosable={false}\n\t\t\t\t\tonOk={() => this.addRow()}\n\t\t\t\t\tonCancel={() => this.closeAddRow()}\n\t\t\t\t\twidth={300}\n\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"add-row\">\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\tvalue={this.state.addRowKey}\n\t\t\t\t\t\t\taddonBefore={\"KEY\"}\n\t\t\t\t\t\t\tonChange={value => this.setState({ addRowKey: value.target.value })}\n\t\t\t\t\t\t></Input>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\tvalue={this.state.addRowValue}\n\t\t\t\t\t\t\taddonBefore={\"VALUE\"}\n\t\t\t\t\t\t\tonChange={value => this.setState({ addRowValue: value.target.value })}\n\t\t\t\t\t\t></Input>\n\t\t\t\t\t</div>\n\t\t\t\t</Modal>\n\n\t\t\t\t<div className=\"top\">\n\t\t\t\t\t<div className=\"top\">\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\taddonBefore={this.type.toUpperCase()}\n\t\t\t\t\t\t\taddonAfter={`TTL: ${this.ttl} SIZE: ${this.len}`}\n\t\t\t\t\t\t\tvalue={this.state.key}\n\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button type=\"default\" onClick={() => this.openRename()}>\n\t\t\t\t\t\t\t重命名\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button type=\"primary\" onClick={() => this.loadAllData(this.type, this.state.key)}>\n\t\t\t\t\t\t\t刷新\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Popconfirm\n\t\t\t\t\t\t\ttitle={`确定要删除 ${this.key} 吗?`}\n\t\t\t\t\t\t\tonConfirm={() => this.deleteKey()}\n\t\t\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t\t\t\ticon={<QuestionCircleOutlined style={{ color: \"red\" }} />}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Button type=\"dashed\" danger>\n\t\t\t\t\t\t\t\t删除\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"bottom\">\n\t\t\t\t\t\t<div className=\"left\">\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tvalue={this.state.view}\n\t\t\t\t\t\t\t\tstyle={{ width: 100 }}\n\t\t\t\t\t\t\t\tonSelect={value => this.changeView(value)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Option key=\"text\" value=\"text\">\n\t\t\t\t\t\t\t\t\ttext\n\t\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t\t\t<Option key=\"json\" value=\"json\">\n\t\t\t\t\t\t\t\t\tjson\n\t\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t\t</Select>\n\n\t\t\t\t\t\t\t<Popconfirm\n\t\t\t\t\t\t\t\ttitle={`确定要删除 ${this.state.showKey} 吗?`}\n\t\t\t\t\t\t\t\tonConfirm={() => this.delRow()}\n\t\t\t\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t\t\t\t\ticon={<QuestionCircleOutlined style={{ color: \"red\" }} />}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Button>删除行</Button>\n\t\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t\t\t<Button onClick={() => this.openAddRow()}>添加行</Button>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"right\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"content\">\n\t\t\t\t\t<div className=\"left\">\n\t\t\t\t\t\t{this.state.list.length > 0 ? (\n\t\t\t\t\t\t\t<AutoSizer>\n\t\t\t\t\t\t\t\t{({ width, height }) => (\n\t\t\t\t\t\t\t\t\t<VList\n\t\t\t\t\t\t\t\t\t\tref={this.vlist}\n\t\t\t\t\t\t\t\t\t\t// className={styles.List}\n\t\t\t\t\t\t\t\t\t\theight={height}\n\t\t\t\t\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\t\t\t\t\toverscanRowCount={20}\n\t\t\t\t\t\t\t\t\t\t// noRowsRenderer={this._noRowsRenderer}\n\t\t\t\t\t\t\t\t\t\trowCount={this.state.list.length}\n\t\t\t\t\t\t\t\t\t\trowHeight={height / 20}\n\t\t\t\t\t\t\t\t\t\trowRenderer={this.renderItem}\n\t\t\t\t\t\t\t\t\t\t// scrollToIndex={this.selectIndex}\n\t\t\t\t\t\t\t\t\t\tscrollToAlignment=\"end\"\n\t\t\t\t\t\t\t\t\t\tonScroll={this.onScroll}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</AutoSizer>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"right\">\n\t\t\t\t\t\t<div className=\"top\">\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tvalue={this.state.showKey}\n\t\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\t\tonChange={value => this.onChangeShowKey(value.target.value)}\n\t\t\t\t\t\t\t></Input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"bottom\">\n\t\t\t\t\t\t\t<TextArea\n\t\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\t\tvalue={this.state.showValue}\n\t\t\t\t\t\t\t\tonChange={value => this.onChangeShowValue(value.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"bottom\">\n\t\t\t\t\t<div className=\"top\">\n\t\t\t\t\t\t<div className=\"left\">\n\t\t\t\t\t\t\t<Button onClick={this.prevPage}>\n\t\t\t\t\t\t\t\t<LeftOutlined />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button onClick={this.nextPage}>\n\t\t\t\t\t\t\t\t<RightOutlined />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tonBlur={() => this.setPage(this.state.page || this.page)}\n\t\t\t\t\t\t\t\tvalue={this.state.page}\n\t\t\t\t\t\t\t\tonChange={value => this.setPage(value.target.value)}\n\t\t\t\t\t\t\t></Input>\n\t\t\t\t\t\t\t<Button onClick={this.go}>GO</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"right\">\n\t\t\t\t\t\t\t<Popconfirm\n\t\t\t\t\t\t\t\ttitle={`确定要保存吗?`}\n\t\t\t\t\t\t\t\tonConfirm={() => this.save()}\n\t\t\t\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t\t\t\t\ticon={<QuestionCircleOutlined style={{ color: \"red\" }} />}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Button type=\"primary\">保存</Button>\n\t\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"bottom\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { Component } from \"react\";\nimport Event from \"../../../event/Event\";\nimport Transform from \"../../../transform/Transform\";\nimport \"./set.scss\";\nimport { Input, Button, Select, Modal, Popconfirm, message } from \"antd\";\nimport { QuestionCircleOutlined, LeftOutlined, RightOutlined } from \"@ant-design/icons\";\nimport Panel from \"../Panel\";\nimport { List as VList, AutoSizer } from \"react-virtualized\";\n\nconst { TextArea } = Input;\n\nconst Option = Select.Option;\n\ntype Props = {\n\ttype: string;\n\tkeys: string;\n\tparent: Panel;\n};\n\nexport default class Set extends Component<Props> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.type = this.props.type;\n\t\tthis.key = this.props.keys;\n\t\tthis.parent = this.props.parent;\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadAllData(this.type, this.key);\n\t}\n\n\tcomponentWillUnmount() {}\n\n\tparent: Panel;\n\tstate = {\n\t\tkey: \"\",\n\t\tshowValue: \"\",\n\t\tlist: [] as any[],\n\t\tpage: 1,\n\t\trename: false,\n\t\taddRow: false,\n\t\taddRowValue: \"\",\n\t\tview: \"显示格式\"\n\t};\n\n\ttype = \"\";\n\tkey = \"\";\n\tttl = -1;\n\tsize = 1000;\n\tlen = 0;\n\n\tselectIndex = 0;\n\tpage = 1;\n\tlistIndex = 0;\n\n\tallData: any[] = [];\n\n\tasync loadAllData(type: string, key: string) {\n\t\tthis.allData = [];\n\t\tvar cursor = 0;\n\t\tvar res: any = {};\n\t\twhile (1) {\n\t\t\tlet r = await Transform.select(type, key, cursor);\n\t\t\tif (!r) return;\n\t\t\tcursor = parseInt(r[0]);\n\t\t\tfor (let i = 0; i < r[1].length; i++) {\n\t\t\t\tconst value = r[1][i];\n\t\t\t\tres[value] = value;\n\t\t\t}\n\t\t\tif (cursor === 0) break;\n\t\t}\n\n\t\tfor (const key in res) {\n\t\t\tthis.allData.push(key);\n\t\t}\n\n\t\tthis.select(type, key);\n\t}\n\n\tasync select(type: string, key: string): Promise<void> {\n\t\tthis.type = type;\n\t\tthis.key = key;\n\t\tlet len = await Transform.call(type, key, \"len\");\n\t\tthis.len = len;\n\t\tlet ttl = await Transform.ttl(key);\n\t\tthis.ttl = ttl;\n\n\t\tthis.page = this.state.page;\n\t\tlet listArray = this.allData.slice((this.page - 1) * this.size, (this.page - 1) * this.size + this.size);\n\t\tif (this.selectIndex >= listArray.length - 1) {\n\t\t\tif (listArray.length === 0) {\n\t\t\t\tif (this.state.page > 1) {\n\t\t\t\t\tthis.selectIndex = 0;\n\t\t\t\t\tthis.state.page--;\n\t\t\t\t\treturn await this.select(type, key);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tthis.selectIndex = listArray.length - 1;\n\t\t\t}\n\t\t}\n\n\t\tif (this.selectIndex >= listArray.length - 1) this.selectIndex = listArray.length - 1;\n\t\tthis.listIndex = (this.page - 1) * this.size + this.selectIndex;\n\n\t\tlet { list } = this.state;\n\t\tlist = [];\n\t\tfor (let i = 0; i < listArray.length; i++) {\n\t\t\tlist.push({ value: listArray[i], select: i === this.selectIndex });\n\t\t}\n\n\t\tthis.setState({ key, list, showValue: listArray[this.selectIndex] }, () => {\n\t\t\tthis.vlist.current?.forceUpdateGrid();\n\t\t});\n\t}\n\n\tvlist: React.RefObject<VList> = React.createRef();\n\n\tonScroll = (value: any) => {\n\t\t// console.log(value);\n\t\t// clientHeight + scrollTop = scrollHeight\n\t};\n\n\trenderItem = (value: any) => {\n\t\tif (value.index > this.state.list.length - 1) return;\n\n\t\tif (this.state.list[value.index].select) {\n\t\t\tvalue.style = Object.assign({ background: \"rgb(186, 231, 225)\" }, value.style);\n\t\t}\n\t\treturn (\n\t\t\t<div key={value.index} style={value.style} className=\"list-item\" onClick={el => this.selectItem(el, value)}>\n\t\t\t\t<div className=\"key\">{(this.page - 1) * this.size + value.index + 1}</div>\n\t\t\t\t<div className=\"value\">{this.state.list[value.index].value}</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tselectItem(el: React.MouseEvent<HTMLDivElement, MouseEvent>, value: any) {\n\t\tlet { list } = this.state;\n\t\tlist[this.selectIndex].select = false;\n\n\t\tthis.selectIndex = value.index;\n\t\tlist[value.index].select = true;\n\n\t\tthis.listIndex = (this.page - 1) * this.size + value.index;\n\n\t\tthis.setState({ list, showValue: list[value.index].value }, () => {\n\t\t\tthis.vlist.current?.forceUpdateGrid();\n\t\t});\n\t}\n\n\tasync delRow() {\n\t\tlet item = this.state.list[this.selectIndex];\n\t\tif (this.len === 1) return this.deleteKey();\n\t\tlet d = await Transform.delete(this.type, this.key, item.value);\n\t\tif (d === false) return;\n\n\t\tthis.allData.splice(this.listIndex, 1);\n\n\t\tif (this.listIndex === this.len - 1) {\n\t\t\tthis.selectIndex--;\n\t\t\tthis.listIndex--;\n\t\t}\n\n\t\tthis.select(this.type, this.key);\n\t\tmessage.success(\"删除成功!\");\n\t}\n\n\tasync addRow() {\n\t\tlet r = await Transform.insert(this.type, this.key, this.state.addRowValue);\n\t\tif (r === false) return;\n\t\tif (r === 0) {\n\t\t\tthis.filter(this.state.addRowValue);\n\t\t}\n\n\t\tthis.allData.splice(this.listIndex, 0, this.state.addRowValue);\n\n\t\tthis.state.addRowValue = \"\";\n\t\tthis.selectIndex++;\n\t\tthis.listIndex++;\n\n\t\tthis.select(this.type, this.key);\n\t\tmessage.success(\"添加成功!\");\n\t\tthis.closeAddRow();\n\t}\n\n\tfilter(value: string) {\n\t\tfor (let i = 0; i < this.allData.length; i++) {\n\t\t\tconst element = this.allData[i];\n\t\t\tif (element === value) {\n\t\t\t\tthis.allData.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tprevPage = () => {\n\t\tif (this.state.page <= 1 || !this.state.page) return;\n\t\tthis.state.page--;\n\t\tthis.setPage(this.state.page);\n\t\tthis.go();\n\t};\n\n\tnextPage = () => {\n\t\tif (this.state.page >= Math.ceil(this.len / this.size) || !this.state.page) return;\n\t\tthis.state.page++;\n\t\tthis.setPage(this.state.page);\n\t\tthis.go();\n\t};\n\n\tgo = () => {\n\t\tthis.select(this.type, this.key);\n\t};\n\n\tsetPage(page: any) {\n\t\tif (page === \"\") return this.setState({ page });\n\t\tpage = parseInt(page) || 1;\n\t\tif (page < 1 || page > Math.ceil(this.len / this.size)) return;\n\t\tthis.setState({ page });\n\t}\n\n\tasync save() {\n\t\tlet item = this.state.list[this.selectIndex];\n\n\t\t// delete\n\t\tlet d = await Transform.delete(this.type, this.key, item.value);\n\t\tif (d === false) return;\n\n\t\tthis.allData.splice(this.listIndex, 1);\n\n\t\t// add\n\t\tlet r = await Transform.insert(this.type, this.key, this.state.showValue);\n\t\tif (r === false) return;\n\t\tif (r === 0) {\n\t\t\tthis.filter(this.state.showValue);\n\t\t}\n\t\tthis.allData.splice(this.listIndex, 0, this.state.showValue);\n\n\t\tthis.select(this.type, this.key);\n\n\t\tmessage.success(\"保存成功\");\n\t}\n\n\tchangeView(view: string): void {\n\t\tswitch (view) {\n\t\t\tcase \"json\":\n\t\t\t\ttry {\n\t\t\t\t\tvar v = JSON.parse(this.state.showValue);\n\t\t\t\t\tthis.setState({ view: view, showValue: JSON.stringify(v, null, 4) });\n\t\t\t\t} catch (error) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"text\":\n\t\t\t\ttry {\n\t\t\t\t\tvar v = JSON.parse(this.state.showValue);\n\t\t\t\t\tthis.setState({ view: view, showValue: JSON.stringify(v) });\n\t\t\t\t} catch (error) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tasync deleteKey() {\n\t\tvar r = await Transform.call(this.type, this.state.key, \"remove\");\n\t\tif (!r) return;\n\t\tEvent.emit(\"deleteKey\", this.key);\n\t\tthis.parent.remove(this.key);\n\t}\n\n\tasync renameKey() {\n\t\tlet oldKey = this.key;\n\t\tlet newKey = this.state.key;\n\t\tthis.key = this.state.key;\n\t\tvar r = await Transform.rename(oldKey, newKey);\n\t\tif (!r) return this.closeRename();\n\t\tEvent.emit(\"insertKey\", newKey, true);\n\t\tEvent.emit(\"deleteKey\", oldKey);\n\t\tEvent.emit(\"activeKey\", oldKey, false);\n\t\tEvent.emit(\"activeKey\", newKey, true);\n\t\tthis.closeRename();\n\t\tthis.parent.update(this.type, oldKey, newKey);\n\t}\n\n\tcloseRename(): void {\n\t\tthis.setState({ rename: false });\n\t}\n\n\topenRename(): void {\n\t\tthis.setState({ rename: true });\n\t}\n\n\tcloseAddRow(): void {\n\t\tthis.setState({ addRow: false });\n\t}\n\n\topenAddRow(): void {\n\t\tthis.setState({ addRow: true });\n\t}\n\n\tonChange(value: string): void {\n\t\tthis.setState({ showValue: value });\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"set\">\n\t\t\t\t<Modal\n\t\t\t\t\tvisible={this.state.rename}\n\t\t\t\t\tmaskClosable={false}\n\t\t\t\t\tclosable={false}\n\t\t\t\t\tonOk={() => this.renameKey()}\n\t\t\t\t\tonCancel={() => this.closeRename()}\n\t\t\t\t\twidth={300}\n\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\tvalue={this.state.key}\n\t\t\t\t\t\tonChange={value => this.setState({ key: value.target.value })}\n\t\t\t\t\t></Input>\n\t\t\t\t</Modal>\n\n\t\t\t\t<Modal\n\t\t\t\t\tvisible={this.state.addRow}\n\t\t\t\t\tmaskClosable={false}\n\t\t\t\t\tclosable={false}\n\t\t\t\t\tonOk={() => this.addRow()}\n\t\t\t\t\tonCancel={() => this.closeAddRow()}\n\t\t\t\t\twidth={300}\n\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\tvalue={this.state.addRowValue}\n\t\t\t\t\t\tonChange={value => this.setState({ addRowValue: value.target.value })}\n\t\t\t\t\t></Input>\n\t\t\t\t</Modal>\n\n\t\t\t\t<div className=\"top\">\n\t\t\t\t\t<div className=\"top\">\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\taddonBefore={this.type.toUpperCase()}\n\t\t\t\t\t\t\taddonAfter={`TTL: ${this.ttl} SIZE: ${this.len}`}\n\t\t\t\t\t\t\tvalue={this.state.key}\n\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button type=\"default\" onClick={() => this.openRename()}>\n\t\t\t\t\t\t\t重命名\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button type=\"primary\" onClick={() => this.loadAllData(this.type, this.state.key)}>\n\t\t\t\t\t\t\t刷新\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Popconfirm\n\t\t\t\t\t\t\ttitle={`确定要删除 ${this.key} 吗?`}\n\t\t\t\t\t\t\tonConfirm={() => this.deleteKey()}\n\t\t\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t\t\t\ticon={<QuestionCircleOutlined style={{ color: \"red\" }} />}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Button type=\"dashed\" danger>\n\t\t\t\t\t\t\t\t删除\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"bottom\">\n\t\t\t\t\t\t<div className=\"left\">\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tvalue={this.state.view}\n\t\t\t\t\t\t\t\tstyle={{ width: 100 }}\n\t\t\t\t\t\t\t\tonSelect={value => this.changeView(value)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Option key=\"plain/text\" value=\"plain/text\">\n\t\t\t\t\t\t\t\t\tplain/text\n\t\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t\t\t<Option key=\"json\" value=\"json\">\n\t\t\t\t\t\t\t\t\tjson\n\t\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t<Popconfirm\n\t\t\t\t\t\t\t\ttitle={`确定要删除 ${this.state.showValue} 吗?`}\n\t\t\t\t\t\t\t\tonConfirm={() => this.delRow()}\n\t\t\t\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t\t\t\t\ticon={<QuestionCircleOutlined style={{ color: \"red\" }} />}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Button>删除行</Button>\n\t\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t\t\t<Button onClick={() => this.openAddRow()}>添加行</Button>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"right\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"content\">\n\t\t\t\t\t<div className=\"left\">\n\t\t\t\t\t\t{this.state.list.length > 0 ? (\n\t\t\t\t\t\t\t<AutoSizer>\n\t\t\t\t\t\t\t\t{({ width, height }) => (\n\t\t\t\t\t\t\t\t\t<VList\n\t\t\t\t\t\t\t\t\t\tref={this.vlist}\n\t\t\t\t\t\t\t\t\t\t// className={styles.List}\n\t\t\t\t\t\t\t\t\t\theight={height}\n\t\t\t\t\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\t\t\t\t\toverscanRowCount={20}\n\t\t\t\t\t\t\t\t\t\t// noRowsRenderer={this._noRowsRenderer}\n\t\t\t\t\t\t\t\t\t\trowCount={this.state.list.length}\n\t\t\t\t\t\t\t\t\t\trowHeight={height / 20}\n\t\t\t\t\t\t\t\t\t\trowRenderer={this.renderItem}\n\t\t\t\t\t\t\t\t\t\t// scrollToIndex={this.selectIndex}\n\t\t\t\t\t\t\t\t\t\tscrollToAlignment=\"end\"\n\t\t\t\t\t\t\t\t\t\tonScroll={this.onScroll}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</AutoSizer>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"right\">\n\t\t\t\t\t\t<TextArea\n\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\tvalue={this.state.showValue}\n\t\t\t\t\t\t\tonChange={value => this.onChange(value.target.value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"bottom\">\n\t\t\t\t\t<div className=\"top\">\n\t\t\t\t\t\t<div className=\"left\">\n\t\t\t\t\t\t\t<Button onClick={this.prevPage}>\n\t\t\t\t\t\t\t\t<LeftOutlined />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button onClick={this.nextPage}>\n\t\t\t\t\t\t\t\t<RightOutlined />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tonBlur={() => this.setPage(this.state.page || this.page)}\n\t\t\t\t\t\t\t\tvalue={this.state.page}\n\t\t\t\t\t\t\t\tonChange={value => this.setPage(value.target.value)}\n\t\t\t\t\t\t\t></Input>\n\t\t\t\t\t\t\t<Button onClick={this.go}>GO</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"right\">\n\t\t\t\t\t\t\t<Popconfirm\n\t\t\t\t\t\t\t\ttitle={`确定要保存吗?`}\n\t\t\t\t\t\t\t\tonConfirm={() => this.save()}\n\t\t\t\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t\t\t\t\ticon={<QuestionCircleOutlined style={{ color: \"red\" }} />}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Button type=\"primary\">保存</Button>\n\t\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"bottom\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { Component } from \"react\";\nimport Event from \"../../../event/Event\";\nimport Transform from \"../../../transform/Transform\";\nimport \"./zset.scss\";\nimport { Input, Button, Select, Modal, Popconfirm, message } from \"antd\";\nimport { QuestionCircleOutlined, LeftOutlined, RightOutlined } from \"@ant-design/icons\";\nimport Panel from \"../Panel\";\nimport { List as VList, AutoSizer } from \"react-virtualized\";\nimport Tools from \"../../../tools/Tools\";\n\nconst { TextArea } = Input;\n\nconst Option = Select.Option;\n\ntype Props = {\n\ttype: string;\n\tkeys: string;\n\tparent: Panel;\n};\n\nexport default class ZSet extends Component<Props> {\n\tconstructor(props: Props) {\n\t\tsuper(props);\n\t\tthis.type = this.props.type;\n\t\tthis.key = this.props.keys;\n\t\tthis.parent = this.props.parent;\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.select(this.type, this.key);\n\t}\n\n\tcomponentWillUnmount() {}\n\n\tparent: Panel;\n\tstate = {\n\t\tkey: \"\",\n\t\tshowValue: \"\",\n\t\tshowKey: \"\",\n\t\tlist: [] as any[],\n\t\tpage: 1,\n\t\trename: false,\n\t\taddRow: false,\n\t\taddRowValue: \"\",\n\t\taddRowKey: \"\",\n\t\tview: \"显示格式\"\n\t};\n\n\ttype = \"\";\n\tkey = \"\";\n\tttl = -1;\n\tsize = 1000;\n\tlen = 0;\n\n\tselectIndex = 0;\n\tpage = 1;\n\tlistIndex = 0;\n\n\tasync select(type: string, key: string): Promise<void> {\n\t\tthis.type = type;\n\t\tthis.key = key;\n\t\tlet len = await Transform.call(type, key, \"len\");\n\t\tthis.len = len;\n\t\tlet ttl = await Transform.ttl(key);\n\t\tthis.ttl = ttl;\n\n\t\tthis.page = this.state.page;\n\t\tlet temp = await Transform.select(type, key, this.state.page, this.size);\n\t\tif (temp === false) return;\n\n\t\tvar listArray: any[] = [];\n\t\tfor (let i = 0; i < temp.length; i += 2) {\n\t\t\tlistArray.push({ value: temp[i], key: temp[i + 1] });\n\t\t}\n\n\t\tif (this.selectIndex >= listArray.length - 1) {\n\t\t\tif (listArray.length === 0) {\n\t\t\t\tif (this.state.page > 1) {\n\t\t\t\t\tthis.selectIndex = 0;\n\t\t\t\t\tthis.state.page--;\n\t\t\t\t\treturn await this.select(type, key);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tthis.selectIndex = listArray.length - 1;\n\t\t\t}\n\t\t}\n\t\tthis.listIndex = (this.page - 1) * this.size + this.selectIndex;\n\n\t\tlet { list } = this.state;\n\t\tlist = [];\n\t\tfor (let i = 0; i < listArray.length; i++) {\n\t\t\tlist.push({ value: listArray[i].value, key: listArray[i].key, select: i === this.selectIndex });\n\t\t}\n\n\t\tthis.setState(\n\t\t\t{ key, list, showValue: list[this.selectIndex].value, showKey: list[this.selectIndex].key },\n\t\t\t() => {\n\t\t\t\tthis.vlist.current?.forceUpdateGrid();\n\t\t\t}\n\t\t);\n\t}\n\n\tvlist: React.RefObject<VList> = React.createRef();\n\n\tonScroll = (value: any) => {\n\t\t// console.log(value);\n\t\t// clientHeight + scrollTop = scrollHeight\n\t};\n\n\trenderItem = (value: any) => {\n\t\tif (value.index > this.state.list.length - 1) return;\n\n\t\tif (this.state.list[value.index].select) {\n\t\t\tvalue.style = Object.assign({ background: \"rgb(186, 231, 225)\" }, value.style);\n\t\t}\n\t\treturn (\n\t\t\t<div key={value.index} style={value.style} className=\"list-item\" onClick={el => this.selectItem(el, value)}>\n\t\t\t\t<div className=\"i\">{(this.page - 1) * this.size + value.index + 1}</div>\n\t\t\t\t<div className=\"key\">{this.state.list[value.index].key}</div>\n\t\t\t\t<div className=\"value\">{this.state.list[value.index].value}</div>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tselectItem(el: React.MouseEvent<HTMLDivElement, MouseEvent>, value: any) {\n\t\tlet { list } = this.state;\n\t\tlist[this.selectIndex].select = false;\n\n\t\tthis.selectIndex = value.index;\n\t\tlist[value.index].select = true;\n\n\t\tthis.listIndex = (this.page - 1) * this.size + value.index;\n\n\t\tthis.setState({ list, showValue: list[value.index].value, showKey: list[value.index].key }, () => {\n\t\t\tthis.vlist.current?.forceUpdateGrid();\n\t\t});\n\t}\n\n\tasync delRow() {\n\t\tlet item = this.state.list[this.selectIndex];\n\t\tif (this.len === 1) return this.deleteKey();\n\t\tlet d = await Transform.delete(this.type, this.key, item.value);\n\t\tif (d === false) return;\n\n\t\tif (this.listIndex === this.len - 1) {\n\t\t\tthis.selectIndex--;\n\t\t\tthis.listIndex--;\n\t\t}\n\n\t\tthis.select(this.type, this.key);\n\t\tmessage.success(\"删除成功!\");\n\t}\n\n\tasync addRow() {\n\t\tif (this.state.addRowKey === \"\") return message.error(\"请填写完整!\");\n\n\t\tlet r = await Transform.insert(this.type, this.key, this.state.addRowKey, this.state.addRowValue);\n\t\tif (r === false) return;\n\n\t\tthis.state.addRowValue = \"\";\n\t\tthis.state.addRowKey = \"\";\n\t\tthis.selectIndex++;\n\t\tthis.listIndex++;\n\n\t\tthis.select(this.type, this.key);\n\t\tmessage.success(\"添加成功!\");\n\t\tthis.closeAddRow();\n\t}\n\n\tprevPage = () => {\n\t\tif (this.state.page <= 1 || !this.state.page) return;\n\t\tthis.state.page--;\n\t\tthis.setPage(this.state.page);\n\t\tthis.go();\n\t};\n\n\tnextPage = () => {\n\t\tif (this.state.page >= Math.ceil(this.len / this.size) || !this.state.page) return;\n\t\tthis.state.page++;\n\t\tthis.setPage(this.state.page);\n\t\tthis.go();\n\t};\n\n\tgo = () => {\n\t\tthis.select(this.type, this.key);\n\t};\n\n\tsetPage(page: any) {\n\t\tif (page === \"\") return this.setState({ page });\n\t\tpage = parseInt(page) || 1;\n\t\tif (page < 1 || page > Math.ceil(this.len / this.size)) return;\n\t\tthis.setState({ page });\n\t}\n\n\tasync save() {\n\t\tif (this.state.showKey === \"\") return message.error(\"请填写完整!\");\n\n\t\tlet item = this.state.list[this.selectIndex];\n\n\t\t// delete\n\t\tlet d = await Transform.delete(this.type, this.key, item.value);\n\t\tif (d === false) return;\n\n\t\t// add\n\t\tlet r = await Transform.insert(this.type, this.key, this.state.showKey, this.state.showValue);\n\t\tif (r === false) return;\n\n\t\tthis.select(this.type, this.key);\n\n\t\tmessage.success(\"保存成功\");\n\t}\n\n\tchangeView(view: string): void {\n\t\tswitch (view) {\n\t\t\tcase \"json\":\n\t\t\t\ttry {\n\t\t\t\t\tvar v = JSON.parse(this.state.showValue);\n\t\t\t\t\tthis.setState({ view: view, showValue: JSON.stringify(v, null, 4) });\n\t\t\t\t} catch (error) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"text\":\n\t\t\t\ttry {\n\t\t\t\t\tvar v = JSON.parse(this.state.showValue);\n\t\t\t\t\tthis.setState({ view: view, showValue: JSON.stringify(v) });\n\t\t\t\t} catch (error) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tasync deleteKey() {\n\t\tvar r = await Transform.call(this.type, this.state.key, \"remove\");\n\t\tif (!r) return;\n\t\tEvent.emit(\"deleteKey\", this.key);\n\t\tthis.parent.remove(this.key);\n\t}\n\n\tasync renameKey() {\n\t\tlet oldKey = this.key;\n\t\tlet newKey = this.state.key;\n\t\tthis.key = this.state.key;\n\t\tvar r = await Transform.rename(oldKey, newKey);\n\t\tif (!r) return this.closeRename();\n\t\tEvent.emit(\"insertKey\", newKey, true);\n\t\tEvent.emit(\"deleteKey\", oldKey);\n\t\tEvent.emit(\"activeKey\", oldKey, false);\n\t\tEvent.emit(\"activeKey\", newKey, true);\n\t\tthis.closeRename();\n\t\tthis.parent.update(this.type, oldKey, newKey);\n\t}\n\n\tcloseRename(): void {\n\t\tthis.setState({ rename: false });\n\t}\n\n\topenRename(): void {\n\t\tthis.setState({ rename: true });\n\t}\n\n\tcloseAddRow(): void {\n\t\tthis.setState({ addRow: false });\n\t}\n\n\topenAddRow(): void {\n\t\tthis.setState({ addRow: true });\n\t}\n\n\tonChangeShowValue(value: string): void {\n\t\tthis.setState({ showValue: value });\n\t}\n\n\tonChangeShowKey(value: string): void {\n\t\tTools.IsNumber(value) && this.setState({ showKey: value });\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"zset\">\n\t\t\t\t<Modal\n\t\t\t\t\tvisible={this.state.rename}\n\t\t\t\t\tmaskClosable={false}\n\t\t\t\t\tclosable={false}\n\t\t\t\t\tonOk={() => this.renameKey()}\n\t\t\t\t\tonCancel={() => this.closeRename()}\n\t\t\t\t\twidth={300}\n\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\tvalue={this.state.key}\n\t\t\t\t\t\tonChange={value => this.setState({ key: value.target.value })}\n\t\t\t\t\t></Input>\n\t\t\t\t</Modal>\n\n\t\t\t\t<Modal\n\t\t\t\t\tvisible={this.state.addRow}\n\t\t\t\t\tmaskClosable={false}\n\t\t\t\t\tclosable={false}\n\t\t\t\t\tonOk={() => this.addRow()}\n\t\t\t\t\tonCancel={() => this.closeAddRow()}\n\t\t\t\t\twidth={300}\n\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"add-row\">\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\tvalue={this.state.addRowKey}\n\t\t\t\t\t\t\taddonBefore={\"KEY\"}\n\t\t\t\t\t\t\tonChange={value =>\n\t\t\t\t\t\t\t\tTools.IsNumber(value.target.value) && this.setState({ addRowKey: value.target.value })\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t></Input>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\tvalue={this.state.addRowValue}\n\t\t\t\t\t\t\taddonBefore={\"VALUE\"}\n\t\t\t\t\t\t\tonChange={value => this.setState({ addRowValue: value.target.value })}\n\t\t\t\t\t\t></Input>\n\t\t\t\t\t</div>\n\t\t\t\t</Modal>\n\n\t\t\t\t<div className=\"top\">\n\t\t\t\t\t<div className=\"top\">\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\taddonBefore={this.type.toUpperCase()}\n\t\t\t\t\t\t\taddonAfter={`TTL: ${this.ttl} SIZE: ${this.len}`}\n\t\t\t\t\t\t\tvalue={this.state.key}\n\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button type=\"default\" onClick={() => this.openRename()}>\n\t\t\t\t\t\t\t重命名\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button type=\"primary\" onClick={() => this.select(this.type, this.state.key)}>\n\t\t\t\t\t\t\t刷新\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Popconfirm\n\t\t\t\t\t\t\ttitle={`确定要删除 ${this.key} 吗?`}\n\t\t\t\t\t\t\tonConfirm={() => this.deleteKey()}\n\t\t\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t\t\t\ticon={<QuestionCircleOutlined style={{ color: \"red\" }} />}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Button type=\"dashed\" danger>\n\t\t\t\t\t\t\t\t删除\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"bottom\">\n\t\t\t\t\t\t<div className=\"left\">\n\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\tvalue={this.state.view}\n\t\t\t\t\t\t\t\tstyle={{ width: 100 }}\n\t\t\t\t\t\t\t\tonSelect={value => this.changeView(value)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Option key=\"text\" value=\"text\">\n\t\t\t\t\t\t\t\t\ttext\n\t\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t\t\t<Option key=\"json\" value=\"json\">\n\t\t\t\t\t\t\t\t\tjson\n\t\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t\t</Select>\n\n\t\t\t\t\t\t\t<Popconfirm\n\t\t\t\t\t\t\t\ttitle={`确定要删除 ${this.state.showKey} 吗?`}\n\t\t\t\t\t\t\t\tonConfirm={() => this.delRow()}\n\t\t\t\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t\t\t\t\ticon={<QuestionCircleOutlined style={{ color: \"red\" }} />}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Button>删除行</Button>\n\t\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t\t\t<Button onClick={() => this.openAddRow()}>添加行</Button>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"right\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"content\">\n\t\t\t\t\t<div className=\"left\">\n\t\t\t\t\t\t{this.state.list.length > 0 ? (\n\t\t\t\t\t\t\t<AutoSizer>\n\t\t\t\t\t\t\t\t{({ width, height }) => (\n\t\t\t\t\t\t\t\t\t<VList\n\t\t\t\t\t\t\t\t\t\tref={this.vlist}\n\t\t\t\t\t\t\t\t\t\t// className={styles.List}\n\t\t\t\t\t\t\t\t\t\theight={height}\n\t\t\t\t\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\t\t\t\t\toverscanRowCount={20}\n\t\t\t\t\t\t\t\t\t\t// noRowsRenderer={this._noRowsRenderer}\n\t\t\t\t\t\t\t\t\t\trowCount={this.state.list.length}\n\t\t\t\t\t\t\t\t\t\trowHeight={height / 20}\n\t\t\t\t\t\t\t\t\t\trowRenderer={this.renderItem}\n\t\t\t\t\t\t\t\t\t\t// scrollToIndex={this.selectIndex}\n\t\t\t\t\t\t\t\t\t\tscrollToAlignment=\"end\"\n\t\t\t\t\t\t\t\t\t\tonScroll={this.onScroll}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</AutoSizer>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"right\">\n\t\t\t\t\t\t<div className=\"top\">\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tvalue={this.state.showKey}\n\t\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\t\tonChange={value => this.onChangeShowKey(value.target.value)}\n\t\t\t\t\t\t\t></Input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"bottom\">\n\t\t\t\t\t\t\t<TextArea\n\t\t\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\t\t\tvalue={this.state.showValue}\n\t\t\t\t\t\t\t\tonChange={value => this.onChangeShowValue(value.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"bottom\">\n\t\t\t\t\t<div className=\"top\">\n\t\t\t\t\t\t<div className=\"left\">\n\t\t\t\t\t\t\t<Button onClick={this.prevPage}>\n\t\t\t\t\t\t\t\t<LeftOutlined />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button onClick={this.nextPage}>\n\t\t\t\t\t\t\t\t<RightOutlined />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tonBlur={() => this.setPage(this.state.page || this.page)}\n\t\t\t\t\t\t\t\tvalue={this.state.page}\n\t\t\t\t\t\t\t\tonChange={value => this.setPage(value.target.value)}\n\t\t\t\t\t\t\t></Input>\n\t\t\t\t\t\t\t<Button onClick={this.go}>GO</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"right\">\n\t\t\t\t\t\t\t<Popconfirm\n\t\t\t\t\t\t\t\ttitle={`确定要保存吗?`}\n\t\t\t\t\t\t\t\tonConfirm={() => this.save()}\n\t\t\t\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t\t\t\t\ticon={<QuestionCircleOutlined style={{ color: \"red\" }} />}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Button type=\"primary\">保存</Button>\n\t\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"bottom\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { Component } from \"react\";\nimport \"./panel.scss\";\nimport Event from \"../../event/Event\";\nimport String from \"./data/String\";\nimport List from \"./data/List\";\nimport { Tabs } from \"antd\";\nimport Hash from \"./data/Hash\";\nimport Set from \"./data/Set\";\nimport ZSet from \"./data/ZSet\";\nconst { TabPane } = Tabs;\nexport default class Panel extends Component {\n\tstate = { activeKey: \"\", panes: [] as any[] };\n\tserverName = \"\";\n\n\tcreateComponent(type: string, key: string) {\n\t\tlet component = null;\n\n\t\tswitch (type) {\n\t\t\tcase \"string\":\n\t\t\t\tcomponent = this.createString(type, key);\n\t\t\t\tbreak;\n\t\t\tcase \"list\":\n\t\t\t\tcomponent = this.createList(type, key);\n\t\t\t\tbreak;\n\t\t\tcase \"hash\":\n\t\t\t\tcomponent = this.createHash(type, key);\n\t\t\t\tbreak;\n\t\t\tcase \"zset\":\n\t\t\t\tcomponent = this.createZSet(type, key);\n\t\t\t\tbreak;\n\t\t\tcase \"set\":\n\t\t\t\tcomponent = this.createSet(type, key);\n\t\t\t\tbreak;\n\t\t}\n\t\treturn component;\n\t}\n\n\tcreateString(type: string, key: string) {\n\t\treturn <String parent={this} type={type} keys={key}></String>;\n\t}\n\n\tcreateList(type: string, key: string) {\n\t\treturn <List parent={this} type={type} keys={key}></List>;\n\t}\n\n\tcreateHash(type: string, key: string) {\n\t\treturn <Hash parent={this} type={type} keys={key}></Hash>;\n\t}\n\n\tcreateSet(type: string, key: string) {\n\t\treturn <Set parent={this} type={type} keys={key}></Set>;\n\t}\n\n\tcreateZSet(type: string, key: string) {\n\t\treturn <ZSet parent={this} type={type} keys={key}></ZSet>;\n\t}\n\n\treset() {\n\t\tthis.serverName = \"\";\n\t\tthis.setState({ activeKey: \"\", panes: [] as any[] });\n\t}\n\n\tcomponentDidMount() {\n\t\tEvent.add(\"selectKey\", (serverName: string, type: string, key: string) => {\n\t\t\tthis.serverName = serverName;\n\n\t\t\tif (this.state.panes.find(v => v.key === key)) {\n\t\t\t\tthis.setState({ activeKey: key });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { panes } = this.state;\n\n\t\t\tlet component = this.createComponent(type, key);\n\n\t\t\tpanes.push({ title: key, content: component, key: key });\n\n\t\t\tif (panes.length > 3) panes.shift();\n\n\t\t\tthis.setState({ panes: panes, activeKey: key });\n\t\t});\n\t\tEvent.add(\"resetPanel\", () => {\n\t\t\tthis.reset();\n\t\t});\n\t}\n\n\tcomponentWillUnmount() {\n\t\tEvent.remove(\"selectKey\");\n\t\tEvent.remove(\"resetPanel\");\n\t}\n\n\tonChange = (activeKey: any) => {\n\t\tEvent.emit(\"activeKey\", activeKey, true);\n\t\tthis.setState({ activeKey });\n\t};\n\n\tonEdit = (targetKey: any, action: string | number) => {\n\t\tif (action === \"add\") {\n\t\t\tthis.add();\n\t\t} else {\n\t\t\tthis.remove(targetKey);\n\t\t}\n\t};\n\n\tupdate(type: string, oldKey: string, newKey: string) {\n\t\tfor (let i = 0; i < this.state.panes.length; i++) {\n\t\t\tconst element = this.state.panes[i];\n\t\t\tif (element.key === oldKey) {\n\t\t\t\telement.title = newKey;\n\t\t\t\telement.key = newKey;\n\t\t\t\telement.content = this.createComponent(type, newKey);\n\t\t\t}\n\t\t}\n\t\tthis.setState({ panes: this.state.panes, activeKey: newKey });\n\t}\n\n\tadd = () => {};\n\n\tremove = (targetKey: string) => {\n\t\tlet activeKey = this.state.activeKey;\n\t\tlet lastIndex: any;\n\t\tthis.state.panes.forEach((pane: { key: string }, i: number) => {\n\t\t\tif (pane.key === targetKey) {\n\t\t\t\tlastIndex = i - 1;\n\t\t\t}\n\t\t});\n\t\tconst panes = this.state.panes.filter((pane: { key: string }) => pane.key !== targetKey);\n\t\tif (panes.length && activeKey === targetKey) {\n\t\t\tif (lastIndex >= 0) {\n\t\t\t\tactiveKey = panes[lastIndex].key;\n\t\t\t} else {\n\t\t\t\tactiveKey = panes[0].key;\n\t\t\t}\n\t\t}\n\t\tthis.setState({ panes, activeKey });\n\t\tif (panes.length === 0) {\n\t\t\tEvent.emit(\"activeKey\", activeKey, false);\n\t\t} else {\n\t\t\tthis.onChange(activeKey);\n\t\t}\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"panel\">\n\t\t\t\t<Tabs\n\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\tactiveKey={this.state.activeKey}\n\t\t\t\t\ttype=\"editable-card\"\n\t\t\t\t\tonEdit={this.onEdit}\n\t\t\t\t\thideAdd\n\t\t\t\t\tstyle={{ height: \"100%\", width: \"100%\" }}\n\t\t\t\t\ttabBarStyle={{ margin: 0, minWidth: \"200px\" }}\n\t\t\t\t\tdestroyInactiveTabPane={true}\n\t\t\t\t\tanimated={false}\n\t\t\t\t\ttabBarGutter={0}\n\t\t\t\t>\n\t\t\t\t\t{this.state.panes.map(\n\t\t\t\t\t\t(pane: {\n\t\t\t\t\t\t\ttitle: React.ReactNode;\n\t\t\t\t\t\t\tkey: string | undefined;\n\t\t\t\t\t\t\tclosable: boolean | undefined;\n\t\t\t\t\t\t\tcontent: React.ReactNode;\n\t\t\t\t\t\t}) => (\n\t\t\t\t\t\t\t<TabPane\n\t\t\t\t\t\t\t\tstyle={{ height: \"100%\", width: \"100%\", position: \"relative\" }}\n\t\t\t\t\t\t\t\ttab={pane.title}\n\t\t\t\t\t\t\t\tkey={pane.key}\n\t\t\t\t\t\t\t\tclosable={pane.closable}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{pane.content}\n\t\t\t\t\t\t\t</TabPane>\n\t\t\t\t\t\t)\n\t\t\t\t\t)}\n\t\t\t\t</Tabs>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { Component } from \"react\";\nimport { Drawer, Button, Modal, Popconfirm } from \"antd\";\nimport Event from \"../../event/Event\";\nimport \"./serverList.scss\";\nimport Config from \"../config/Config\";\nimport Command from \"../../services/Command\";\nimport { QuestionCircleOutlined, DownloadOutlined, DeleteOutlined, PlusOutlined } from \"@ant-design/icons\";\nimport { Collapse } from \"antd\";\nimport { config } from \"../../interface/config\";\nconst { Panel } = Collapse;\n\nexport default class ServerList extends Component {\n\tstate = { visible: false, configs: Config.allConfig() as { [key: string]: config } };\n\n\tonClose() {\n\t\tthis.setState({ visible: false });\n\t}\n\n\tonOpen() {\n\t\tthis.setState({ visible: true });\n\t}\n\n\tcomponentDidMount() {\n\t\tEvent.add(\"openServerList\", () => this.onOpen());\n\t\tEvent.add(\"addServer\", () => this.setState({ configs: Config.allConfig() }));\n\t\tEvent.add(\"updateServer\", () => this.setState({ configs: Config.allConfig() }));\n\t}\n\n\tcomponentWillUnmount() {\n\t\tEvent.remove(\"openServerList\");\n\t\tEvent.remove(\"addServer\");\n\t\tEvent.remove(\"updateServer\");\n\t}\n\n\tupdate(config: config) {\n\t\t// Event.emit(\"update\", config.name);\n\t\tEvent.emit(\"openAddServer\", config);\n\t\tthis.onClose();\n\t}\n\n\tconnect(config: config) {\n\t\tEvent.emit(\"connect\", config.name, config.connectType);\n\t\tthis.onClose();\n\t}\n\n\tdisconnect(config: config) {\n\t\t// this.onClose();\n\t\tEvent.emit(\"disconnect\", config.name);\n\t\tCommand.disconnect(config.name);\n\t}\n\n\tdelete(config: config) {\n\t\tConfig.deleteConfig(config.name);\n\t\tthis.setState({ configs: Config.allConfig() });\n\t\tEvent.emit(\"delete\", config.name);\n\t\tCommand.disconnect(config.name);\n\t}\n\n\tsetDefault(config: config) {\n\t\tfor (const key in this.state.configs) {\n\t\t\tif (key === config.name) continue;\n\t\t\tthis.state.configs[key].default = false;\n\t\t\tConfig.setConfig(key, this.state.configs[key]);\n\t\t}\n\t\tconfig.default = !config.default;\n\t\tConfig.setConfig(config.name, config);\n\t\tthis.setState({ configs: Config.allConfig() });\n\t}\n\n\taddServer() {\n\t\tEvent.emit(\"openAddServer\");\n\t\tthis.onClose();\n\t}\n\n\trender() {\n\t\tlet configs = Object.values(this.state.configs);\n\n\t\treturn (\n\t\t\t<Drawer\n\t\t\t\ttitle={\n\t\t\t\t\t<div className=\"server-list-header\">\n\t\t\t\t\t\t<div className=\"left\">服务器列表</div>\n\t\t\t\t\t\t<div className=\"right\">\n\t\t\t\t\t\t\t<Button type=\"primary\" onClick={() => this.addServer()}>\n\t\t\t\t\t\t\t\t<PlusOutlined />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\ttype=\"default\"\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\tModal.confirm({\n\t\t\t\t\t\t\t\t\t\tcontent: \"确定导出所有配置?\",\n\t\t\t\t\t\t\t\t\t\tokText: \"别啰嗦,快点!\",\n\t\t\t\t\t\t\t\t\t\tcancelText: \"我再想想.\",\n\t\t\t\t\t\t\t\t\t\tonOk: () => {\n\t\t\t\t\t\t\t\t\t\t\tCommand.export(\"config.json\", JSON.stringify(Config.allConfig()));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<DownloadOutlined />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\ttype=\"danger\"\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\tModal.confirm({\n\t\t\t\t\t\t\t\t\t\tcontent: \"确定清除所有配置?\",\n\t\t\t\t\t\t\t\t\t\tokText: \"别啰嗦,快点!\",\n\t\t\t\t\t\t\t\t\t\tcancelText: \"我再想想.\",\n\t\t\t\t\t\t\t\t\t\tonOk: () => {\n\t\t\t\t\t\t\t\t\t\t\tConfig.deleteAllConfig();\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({ configs: {} });\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<DeleteOutlined />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\tplacement=\"right\"\n\t\t\t\tclosable={false}\n\t\t\t\tonClose={() => this.onClose()}\n\t\t\t\tvisible={this.state.visible}\n\t\t\t\tgetContainer={false}\n\t\t\t\twidth={\"400px\"}\n\t\t\t\tclassName=\"server-list\"\n\t\t\t\tdestroyOnClose\n\t\t\t>\n\t\t\t\t{configs.length > 0 ? (\n\t\t\t\t\t<Collapse>\n\t\t\t\t\t\t{configs.map(config => (\n\t\t\t\t\t\t\t<Panel\n\t\t\t\t\t\t\t\theader={\n\t\t\t\t\t\t\t\t\t<div className=\"panel-title\">\n\t\t\t\t\t\t\t\t\t\t{config.default ? (\n\t\t\t\t\t\t\t\t\t\t\t<div>{`${config.name} (默认)`}</div>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<div>{config.name}</div>\n\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"link\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={e => {\n\t\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.connect(config);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t连接\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"link\"\n\t\t\t\t\t\t\t\t\t\t\t\tdanger\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={e => {\n\t\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.disconnect(config);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t断开\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tkey={config.name}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"db-header\" key={config.name}>\n\t\t\t\t\t\t\t\t\t<div>{config.name}</div>\n\t\t\t\t\t\t\t\t\t<div className=\"button\">\n\t\t\t\t\t\t\t\t\t\t<Button type=\"link\" onClick={() => this.setDefault(config)}>\n\t\t\t\t\t\t\t\t\t\t\t{config.default ? \"取消默认\" : \"设为默认\"}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t<Button type=\"link\" onClick={() => this.update(config)}>\n\t\t\t\t\t\t\t\t\t\t\t修改\n\t\t\t\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t\t\t\t<Popconfirm\n\t\t\t\t\t\t\t\t\t\t\ttitle={`确定要删除 ${config.name} 吗?`}\n\t\t\t\t\t\t\t\t\t\t\tonConfirm={() => this.delete(config)}\n\t\t\t\t\t\t\t\t\t\t\tokText=\"确定\"\n\t\t\t\t\t\t\t\t\t\t\tcancelText=\"取消\"\n\t\t\t\t\t\t\t\t\t\t\ticon={<QuestionCircleOutlined style={{ color: \"red\" }} />}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Button type=\"link\" danger>\n\t\t\t\t\t\t\t\t\t\t\t\t删除\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Panel>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Collapse>\n\t\t\t\t) : null}\n\t\t\t</Drawer>\n\t\t);\n\t}\n}\n","import React, { Component } from \"react\";\nimport { Progress } from \"antd\";\nimport \"./progress.scss\";\nimport Event from \"../../event/Event\";\n\nexport default class MProgress extends Component {\n\tcomponentWillUnmount() {\n\t\tEvent.remove(\"progress\");\n\t}\n\n\tcomponentDidMount() {\n\t\tEvent.add(\"progress\", v => this.progress(v));\n\t}\n\n\tprogress(v: number) {\n\t\tif (v === 0) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.setState({ progress: v });\n\t\t\t}, 1000);\n\t\t} else {\n\t\t\tthis.setState({ progress: v });\n\t\t}\n\t}\n\n\tstate = { progress: 100 };\n\n\trender() {\n\t\treturn (\n\t\t\t<Progress\n\t\t\t\tstrokeColor={{\n\t\t\t\t\t\"0%\": \"#108ee9\",\n\t\t\t\t\t\"100%\": \"#87d068\"\n\t\t\t\t}}\n\t\t\t\tstyle={{ width: \"100%\", height: \"1px\" }}\n\t\t\t\tshowInfo={false}\n\t\t\t\tstrokeWidth={3}\n\t\t\t\tpercent={this.state.progress}\n\t\t\t\tclassName=\"progress\"\n\t\t\t/>\n\t\t);\n\t}\n}\n","import React, { Component } from \"react\";\nimport { Radio, Input, Button, Modal, message } from \"antd\";\nimport Event from \"../../event/Event\";\nimport \"./addKey.scss\";\nimport Transform from \"../../transform/Transform\";\nimport Config from \"../config/Config\";\nimport { config } from \"../../interface/config\";\nimport Tools from \"../../tools/Tools\";\n\nexport default class AddKey extends Component {\n\tstate = { visible: false, keyType: \"string\", key: \"\", k: \"\", v: \"\" };\n\n\tonClose() {\n\t\tthis.setState({ visible: false, key: \"\", k: \"\", v: \"\" });\n\t}\n\n\tonOpen() {\n\t\tthis.config = Config.getCurrent();\n\t\tif (!this.config.name) {\n\t\t\tmessage.error(\"请连接服务器!\");\n\t\t\treturn this.onClose();\n\t\t}\n\t\tthis.setState({ visible: true });\n\t}\n\n\tcomponentDidMount() {\n\t\tEvent.add(\"addKey\", () => this.onOpen());\n\t}\n\n\tcomponentWillUnmount() {\n\t\tEvent.remove(\"addKey\");\n\t}\n\n\tconfig: config = {} as config;\n\n\tcreateNormal() {\n\t\treturn (\n\t\t\t<div className=\"input-box-2\">\n\t\t\t\t<div className=\"top\">\n\t\t\t\t\t<Input\n\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\taddonBefore=\"KEY\"\n\t\t\t\t\t\tplaceholder=\"key\"\n\t\t\t\t\t\tvalue={this.state.key}\n\t\t\t\t\t\tonChange={value => this.setState({ key: value.target.value })}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"bottom\">\n\t\t\t\t\t<Input\n\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\taddonBefore=\"VALUE\"\n\t\t\t\t\t\tplaceholder=\"value\"\n\t\t\t\t\t\tvalue={this.state.v}\n\t\t\t\t\t\tonChange={value => this.setState({ v: value.target.value })}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcreateSpecial() {\n\t\treturn (\n\t\t\t<div className=\"input-box-3\">\n\t\t\t\t<div className=\"top\">\n\t\t\t\t\t<Input\n\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\taddonBefore=\"KEY\"\n\t\t\t\t\t\tplaceholder=\"key\"\n\t\t\t\t\t\tvalue={this.state.key}\n\t\t\t\t\t\tonChange={value => this.setState({ key: value.target.value })}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"bottom\">\n\t\t\t\t\t<Input\n\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\tplaceholder=\"k\"\n\t\t\t\t\t\tvalue={this.state.k}\n\t\t\t\t\t\tonChange={value => {\n\t\t\t\t\t\t\tvar k = value.target.value;\n\t\t\t\t\t\t\tif (this.state.keyType === \"zset\") {\n\t\t\t\t\t\t\t\tTools.IsNumber(k) && this.setState({ k: k });\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setState({ k: k });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tspellCheck={false}\n\t\t\t\t\t\tplaceholder=\"v\"\n\t\t\t\t\t\tvalue={this.state.v}\n\t\t\t\t\t\tonChange={value => this.setState({ v: value.target.value })}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcreateComponent() {\n\t\tswitch (this.state.keyType) {\n\t\t\tcase \"string\":\n\t\t\tcase \"list\":\n\t\t\tcase \"set\":\n\t\t\t\treturn this.createNormal();\n\t\t\tcase \"hash\":\n\t\t\tcase \"zset\":\n\t\t\t\treturn this.createSpecial();\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Modal\n\t\t\t\tdestroyOnClose\n\t\t\t\ttitle={`添加KEY`}\n\t\t\t\tvisible={this.state.visible}\n\t\t\t\tclassName=\"add-key\"\n\t\t\t\tclosable={false}\n\t\t\t\tmaskClosable={false}\n\t\t\t\tfooter={null}\n\t\t\t>\n\t\t\t\t<div className=\"select-box\">\n\t\t\t\t\t<Radio.Group\n\t\t\t\t\t\tvalue={this.state.keyType}\n\t\t\t\t\t\tonChange={value => this.setState({ keyType: value.target.value })}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Radio.Button value=\"string\">string</Radio.Button>\n\t\t\t\t\t\t<Radio.Button value=\"list\">list</Radio.Button>\n\t\t\t\t\t\t<Radio.Button value=\"set\">set</Radio.Button>\n\t\t\t\t\t\t<Radio.Button value=\"hash\">hash</Radio.Button>\n\t\t\t\t\t\t<Radio.Button value=\"zset\">zset</Radio.Button>\n\t\t\t\t\t</Radio.Group>\n\t\t\t\t</div>\n\n\t\t\t\t{this.createComponent()}\n\n\t\t\t\t<div className=\"button-box\">\n\t\t\t\t\t<Button type=\"primary\" onClick={() => this.add()}>\n\t\t\t\t\t\t确定\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t<Button type=\"default\" onClick={() => this.onClose()}>\n\t\t\t\t\t\t取消\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t);\n\t}\n\tasync add() {\n\t\tif (this.state.key === \"\") return message.error(\"请填写完整!\");\n\n\t\tif (this.state.v === \"\") return message.error(\"请填写完整!\");\n\n\t\tswitch (this.state.keyType) {\n\t\t\tcase \"string\":\n\t\t\tcase \"list\":\n\t\t\tcase \"set\":\n\t\t\t\tlet n = await Transform.insert(this.state.keyType, this.state.key, this.state.v);\n\t\t\t\tif (!n) return;\n\t\t\t\tmessage.success(\"添加成功!\");\n\t\t\t\tbreak;\n\t\t\tcase \"hash\":\n\t\t\tcase \"zset\":\n\t\t\t\tif (this.state.k === \"\") return message.error(\"请填写完整!\");\n\t\t\t\tlet s = await Transform.insert(this.state.keyType, this.state.key, this.state.k, this.state.v);\n\t\t\t\tif (!s) return;\n\t\t\t\tmessage.success(\"添加成功!\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn message.error(\"不支持的类型!\");\n\t\t}\n\n\t\tEvent.emit(\"insertKey\", this.state.key);\n\n\t\tthis.onClose();\n\t}\n}\n","import React, { Component } from \"react\";\nimport Config from \"../config/Config\";\nimport Event from \"../../event/Event\";\n\nexport default class Connection extends Component {\n\tcomponentDidMount() {\n\t\tthis.connectDefault();\n\t}\n\n\tgetDefaultConfig() {\n\t\tvar configs = Config.allConfig();\n\t\tfor (const key in configs) {\n\t\t\tlet config = configs[key];\n\t\t\tif (config.default) {\n\t\t\t\treturn config;\n\t\t\t}\n\t\t}\n\t\treturn {};\n\t}\n\n\tconnectDefault() {\n\t\tlet config = this.getDefaultConfig();\n\t\tif (!config.name) return;\n\t\tEvent.emit(\"connect\", config.name, config.connectType);\n\t}\n\n\trender() {\n\t\treturn null;\n\t}\n}\n","import React, { Component } from \"react\";\nimport { Drawer, Button, Modal, message, Tabs } from \"antd\";\nimport Event from \"../../event/Event\";\nimport \"./setting.scss\";\nimport WebSocket from \"../../ws/WebSocket\";\n// import { Terminal } from \"xterm\";\n// import \"../../../../node_modules/xterm/css/xterm.css\";\n// const os = window.require(\"electron\").remote.require(\"os\");\n// const process = window.require(\"electron\").remote.require(\"process\");\n// const pty = window.require(\"electron\").remote.require(\"node-pty\");\nconst { TabPane } = Tabs;\n\nexport default class Setting extends Component {\n\tstate = { visible: false, loading: false, progress: 0 };\n\n\tonClose() {\n\t\tthis.setState({ visible: false });\n\t}\n\n\tonOpen() {\n\t\tthis.setState({ visible: true });\n\t}\n\n\tcomponentDidMount() {\n\t\tEvent.add(\"openSetting\", () => this.onOpen());\n\n\t\tWebSocket.ws.AddListener(\"/client/update/endCheck\", (e: any, data: any) => this.endCheck(data));\n\n\t\tWebSocket.ws.AddListener(\"/client/update/endUpdate\", (e: any, data: any) => this.endUpdate(data));\n\n\t\tWebSocket.ws.AddListener(\"/client/update/progressUpdate\", (e: any, data: any) => this.progressUpdate(data));\n\t}\n\n\tcomponentWillUnmount() {\n\t\tEvent.remove(\"openSetting\");\n\t}\n\n\tstartCheck() {\n\t\tthis.setState({ loading: true });\n\t\tWebSocket.ws.Emit(\"/server/update/startCheck\");\n\t}\n\n\tendCheck(data: any) {\n\t\tif (data.err) {\n\t\t\tthis.setState({ loading: false });\n\t\t\treturn message.error(data.err.message);\n\t\t}\n\n\t\tif (!data.shouldUpdate) {\n\t\t\tthis.setState({ loading: false });\n\t\t\tmessage.info(`当前已经是最新版本`);\n\t\t}\n\n\t\tif (data.shouldUpdate) {\n\t\t\treturn this.startUpdate();\n\t\t}\n\t}\n\n\tstartUpdate() {\n\t\tWebSocket.ws.Emit(\"/server/update/startUpdate\");\n\t}\n\n\tendUpdate(data: any) {\n\t\tthis.setState({ loading: false, progress: 0 });\n\n\t\tif (data.err) {\n\t\t\treturn message.error(data.err.code);\n\t\t}\n\n\t\tModal.info({ content: \"更新完毕,点击确定重启.\", onOk: () => this.restart() });\n\t}\n\n\tprogressUpdate(data: any) {\n\t\tthis.setState({ progress: data.progress });\n\t}\n\n\trestart() {\n\t\tWebSocket.ws.Emit(\"/server/system/restart\");\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Drawer\n\t\t\t\ttitle={`系统设置`}\n\t\t\t\tplacement={`top`}\n\t\t\t\tclosable={false}\n\t\t\t\tonClose={() => this.onClose()}\n\t\t\t\tvisible={this.state.visible}\n\t\t\t\tgetContainer={false}\n\t\t\t\twidth={\"100%\"}\n\t\t\t\theight={\"80%\"}\n\t\t\t\tdestroyOnClose\n\t\t\t\tclassName=\"setting\"\n\t\t\t>\n\t\t\t\t<Tabs defaultActiveKey=\"1\">\n\t\t\t\t\t<TabPane tab=\"基本设置\" key=\"1\">\n\t\t\t\t\t\t<div className=\"setting-form\">\n\t\t\t\t\t\t\t<Button type=\"default\" loading={this.state.loading} onClick={() => this.startCheck()}>\n\t\t\t\t\t\t\t\t{this.state.progress ? `正在更新... ${this.state.progress}%` : \"检测更新\"}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"button-box\">\n\t\t\t\t\t\t\t<Button type=\"primary\">保存</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</TabPane>\n\t\t\t\t</Tabs>\n\t\t\t</Drawer>\n\t\t);\n\t}\n}\n","import React, { Component } from \"react\";\nimport \"./index.scss\";\nimport Header from \"../../components/header/Header\";\nimport AddServer from \"../../components/addServer/AddServer\";\nimport KeyTree from \"../../components/keyTree/KeyTree\";\nimport Panel from \"../../components/panel/Panel\";\nimport ServerList from \"../../components/serverList/ServerList\";\nimport MProgress from \"../../components/progress/Progress\";\nimport AddKey from \"../../components/addKey/AddKey\";\nimport Connection from \"../../components/connection/Connection\";\nimport Setting from \"../../components/setting/Setting\";\n\nclass Index extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"index\">\n\t\t\t\t<AddKey></AddKey>\n\t\t\t\t<AddServer></AddServer>\n\t\t\t\t<ServerList></ServerList>\n\t\t\t\t<Setting></Setting>\n\t\t\t\t<div className=\"header\">\n\t\t\t\t\t<Header></Header>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"content\">\n\t\t\t\t\t<KeyTree></KeyTree>\n\t\t\t\t\t<Panel></Panel>\n\t\t\t\t</div>\n\t\t\t\t<MProgress></MProgress>\n\t\t\t\t<Connection></Connection>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Index;\n","import React from \"react\";\nimport \"./login.scss\";\nimport { LoadingOutlined } from \"@ant-design/icons\";\n\nfunction Login() {\n\treturn (\n\t\t<div className=\"login\">\n\t\t\t<div className=\"content\">\n\t\t\t\t<div className=\"loading\">\n\t\t\t\t\t<LoadingOutlined style={{ fontSize: \"2rem\" }}></LoadingOutlined>\n\t\t\t\t\t<div className=\"tips\">正在准备...</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Login;\n","import React, { Component } from \"react\";\nimport { HashRouter, Route, Switch, Redirect } from \"react-router-dom\";\nimport { createBrowserHistory, History, UnregisterCallback, Location } from \"history\";\nimport \"./App.scss\";\nimport Index from \"./pages/index/Index\";\nimport Login from \"./pages/login/Login\";\nimport WebSocket from \"./ws/WebSocket\";\nimport Config from \"./components/config/Config\";\n\nexport default class App extends Component {\n\tunlisten!: UnregisterCallback;\n\n\tchange(location: Location<History.PoorMansUnknown>) {\n\t\tif (!Config.getStatus()) return (window.location.hash = \"/login\");\n\t\tif (location.hash === \"#/login\") return (window.location.hash = \"/index\");\n\t}\n\n\tstate = { start: false };\n\n\tconstructor(props: any) {\n\t\tsuper(props);\n\t\tWebSocket.start(() => this.setState({ start: true }));\n\t}\n\n\tcomponentDidMount() {\n\t\tconst history = createBrowserHistory();\n\t\t// Get the current location.\n\t\tconst location = history.location;\n\n\t\tthis.change(location);\n\n\t\t// Listen for changes to the current location.\n\t\tthis.unlisten = history.listen((location, action) => {\n\t\t\t// location is an object like window.location\n\t\t\tthis.change(location);\n\t\t});\n\t}\n\n\tcomponentWillUnmount() {\n\t\tWebSocket.close();\n\t\tthis.unlisten();\n\t}\n\n\trender() {\n\t\treturn this.state.start ? (\n\t\t\t<HashRouter>\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route path=\"/index\" component={Index} />\n\t\t\t\t\t<Route path=\"/login\" component={Login} exact />\n\t\t\t\t\t<Redirect from=\"**\" to=\"/index\" />\n\t\t\t\t</Switch>\n\t\t\t</HashRouter>\n\t\t) : null;\n\t}\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === \"localhost\" ||\n\t\t// [::1] is the IPv6 localhost address.\n\t\twindow.location.hostname === \"[::1]\" ||\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\n\t\twindow.location.hostname.match(\n\t\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n\t\t)\n);\n\ntype Config = {\n\tonSuccess?: (registration: ServiceWorkerRegistration) => void;\n\tonUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n\tif (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener(\"load\", () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\"This web app is being served cache-first by a service \" +\n\t\t\t\t\t\t\t\"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then(registration => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing;\n\t\t\t\tif (installingWorker == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === \"installed\") {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t\"New content is available and will be used when all \" +\n\t\t\t\t\t\t\t\t\t\"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log(\"Content is cached for offline use.\");\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error(\"Error during service worker registration:\", error);\n\t\t});\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl, {\n\t\theaders: { \"Service-Worker\": \"script\" }\n\t})\n\t\t.then(response => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tconst contentType = response.headers.get(\"content-type\");\n\t\t\tif (\n\t\t\t\tresponse.status === 404 ||\n\t\t\t\t(contentType != null &&\n\t\t\t\t\tcontentType.indexOf(\"javascript\") === -1)\n\t\t\t) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log(\n\t\t\t\t\"No internet connection found. App is running in offline mode.\"\n\t\t\t);\n\t\t});\n}\n\nexport function unregister() {\n\tif (\"serviceWorker\" in navigator) {\n\t\tnavigator.serviceWorker.ready\n\t\t\t.then(registration => {\n\t\t\t\tregistration.unregister();\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.error(error.message);\n\t\t\t});\n\t}\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Axios from \"axios\";\nimport \"./index.css\";\nimport App from \"./app/App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { message, notification } from \"antd\";\nimport Config from \"./app/components/config/Config\";\n\nAxios.defaults.headers.post[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n\nAxios.defaults.baseURL = \"http://127.0.0.1:12388\";\n\nAxios.defaults.timeout = 5000;\n\nAxios.interceptors.response.use(\n\tresponse => {\n\t\treturn response;\n\t},\n\terror => {\n\t\treturn error;\n\t}\n);\n\nmessage.config({ maxCount: 3 });\n\nnotification.config({ duration: 2, placement: \"bottomRight\" });\n\n// create uuid\nif (!Config.getUUID()) Config.createUUID();\nConfig.delDB();\nConfig.delServerName();\nConfig.delCurrent();\nConfig.delStatus();\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}